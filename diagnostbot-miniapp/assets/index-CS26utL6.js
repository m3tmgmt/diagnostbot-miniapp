let ke;function cn(e,t){ke?ke.set(e,t):t()}function ze(e){if(ke)return e();ke=new Map;try{e()}finally{ke.forEach(t=>t()),ke=void 0}}function D(e,t){t||(t={});const s=t.equals||Object.is;let n=[],o=e;const i=l=>{if(!s(o,l)){const h=o;o=l,cn(c,()=>{[...n].forEach(([f,m])=>{f(l,h),m&&u(f,!0)})})}};function a(l){const h=typeof l!="object"?{once:l}:l;return{once:h.once||!1,signal:h.signal||!1}}const u=(l,h)=>{const f=a(h),m=n.findIndex(([g,w])=>g===l&&w.once===f.once&&w.signal===f.signal);m>=0&&n.splice(m,1)},c=Object.assign(function(){return ln(c),o},{destroy(){n=[]},set:i,reset(){i(e)},sub(l,h){return n.push([l,a(h)]),()=>u(l,h)},unsub:u,unsubAll(){n=n.filter(l=>l[1].signal)}});return c}const Me=[];function ln(e){Me.length&&Me[Me.length-1].add(e)}function C(e,t){let s=new Set,n;function o(){return n||(n=D(a(),t))}function i(){o().set(a())}function a(){s.forEach(l=>{l.unsub(i,{signal:!0})});const u=new Set;let c;Me.push(u);try{c=e()}finally{Me.pop()}return u.forEach(l=>{l.sub(i,{signal:!0})}),s=u,c}return Object.assign(function(){return o()()},{destroy(){o().destroy()},sub(...u){return o().sub(...u)},unsub(...u){o().unsub(...u)},unsubAll(...u){o().unsubAll(...u)}})}let oe;function Ct(e){return{lang:(e==null?void 0:e.lang)??(oe==null?void 0:oe.lang),message:e==null?void 0:e.message,abortEarly:(e==null?void 0:e.abortEarly)??(oe==null?void 0:oe.abortEarly),abortPipeEarly:(e==null?void 0:e.abortPipeEarly)??(oe==null?void 0:oe.abortPipeEarly)}}let it;function pn(e){return it==null?void 0:it.get(e)}let ot;function hn(e){return ot==null?void 0:ot.get(e)}let at;function fn(e,t){var s;return(s=at==null?void 0:at.get(e))==null?void 0:s.get(t)}function dn(e){var s,n;const t=typeof e;return t==="string"?`"${e}"`:t==="number"||t==="bigint"||t==="boolean"?`${e}`:t==="object"||t==="function"?(e&&((n=(s=Object.getPrototypeOf(e))==null?void 0:s.constructor)==null?void 0:n.name))??"null":t}function z(e,t,s,n,o){const i=o&&"input"in o?o.input:s.value,a=(o==null?void 0:o.expected)??e.expects??null,u=(o==null?void 0:o.received)??dn(i),c={kind:e.kind,type:e.type,input:i,expected:a,received:u,message:`Invalid ${t}: ${a?`Expected ${a} but r`:"R"}eceived ${u}`,requirement:e.requirement,path:o==null?void 0:o.path,issues:o==null?void 0:o.issues,lang:n.lang,abortEarly:n.abortEarly,abortPipeEarly:n.abortPipeEarly},l=e.kind==="schema",h=(o==null?void 0:o.message)??e.message??fn(e.reference,c.lang)??(l?hn(c.lang):null)??n.message??pn(c.lang);h!==void 0&&(c.message=typeof h=="function"?h(c):h),l&&(s.typed=!1),s.issues?s.issues.push(c):s.issues=[c]}function J(e){return{version:1,vendor:"valibot",validate(t){return e["~run"]({value:t},Ct())}}}function Fs(e,t){return Object.hasOwn(e,t)&&t!=="__proto__"&&t!=="prototype"&&t!=="constructor"}function _n(e,t){const s=[...new Set(e)];return s.length>1?`(${s.join(` ${t} `)})`:s[0]??"never"}var mn=class extends Error{constructor(e){super(e[0].message),this.name="ValiError",this.issues=e}};function Qe(e,t){return{kind:"validation",type:"check",reference:Qe,async:!1,expects:null,requirement:e,message:t,"~run"(s,n){return s.typed&&!this.requirement(s.value)&&z(this,"input",s,n),s}}}function St(e){return{kind:"validation",type:"integer",reference:St,async:!1,expects:null,requirement:Number.isInteger,message:e,"~run"(t,s){return t.typed&&!this.requirement(t.value)&&z(this,"integer",t,s),t}}}function ae(e){return{kind:"transformation",type:"transform",reference:ae,async:!1,operation:e,"~run"(t){return t.value=this.operation(t.value),t}}}function bn(e,t,s){return typeof e.fallback=="function"?e.fallback(t,s):e.fallback}function kt(e,t,s){return typeof e.default=="function"?e.default(t,s):e.default}function Et(e,t){return!e["~run"]({value:t},{abortEarly:!0}).issues}function Cs(){return{kind:"schema",type:"any",reference:Cs,expects:"any",async:!1,get"~standard"(){return J(this)},"~run"(e){return e.typed=!0,e}}}function Ss(e,t){return{kind:"schema",type:"array",reference:Ss,expects:"Array",async:!1,item:e,message:t,get"~standard"(){return J(this)},"~run"(s,n){var i;const o=s.value;if(Array.isArray(o)){s.typed=!0,s.value=[];for(let a=0;a<o.length;a++){const u=o[a],c=this.item["~run"]({value:u},n);if(c.issues){const l={type:"array",origin:"value",input:o,key:a,value:u};for(const h of c.issues)h.path?h.path.unshift(l):h.path=[l],(i=s.issues)==null||i.push(h);if(s.issues||(s.issues=c.issues),n.abortEarly){s.typed=!1;break}}c.typed||(s.typed=!1),s.value.push(c.value)}}else z(this,"type",s,n);return s}}}function ye(e){return{kind:"schema",type:"boolean",reference:ye,expects:"boolean",async:!1,message:e,get"~standard"(){return J(this)},"~run"(t,s){return typeof t.value=="boolean"?t.typed=!0:z(this,"type",t,s),t}}}function Ze(e){return{kind:"schema",type:"date",reference:Ze,expects:"Date",async:!1,message:e,get"~standard"(){return J(this)},"~run"(t,s){return t.value instanceof Date?isNaN(t.value)?z(this,"type",t,s,{received:'"Invalid Date"'}):t.typed=!0:z(this,"type",t,s),t}}}function xt(e){return{kind:"schema",type:"function",reference:xt,expects:"Function",async:!1,message:e,get"~standard"(){return J(this)},"~run"(t,s){return typeof t.value=="function"?t.typed=!0:z(this,"type",t,s),t}}}function It(e,t){return{kind:"schema",type:"instance",reference:It,expects:e.name,async:!1,class:e,message:t,get"~standard"(){return J(this)},"~run"(s,n){return s.value instanceof this.class?s.typed=!0:z(this,"type",s,n),s}}}function G(e,t){return{kind:"schema",type:"loose_object",reference:G,expects:"Object",async:!1,entries:e,message:t,get"~standard"(){return J(this)},"~run"(s,n){var i;const o=s.value;if(o&&typeof o=="object"){s.typed=!0,s.value={};for(const a in this.entries){const u=this.entries[a];if(a in o||(u.type==="exact_optional"||u.type==="optional"||u.type==="nullish")&&u.default!==void 0){const c=a in o?o[a]:kt(u),l=u["~run"]({value:c},n);if(l.issues){const h={type:"object",origin:"value",input:o,key:a,value:c};for(const f of l.issues)f.path?f.path.unshift(h):f.path=[h],(i=s.issues)==null||i.push(f);if(s.issues||(s.issues=l.issues),n.abortEarly){s.typed=!1;break}}l.typed||(s.typed=!1),s.value[a]=l.value}else if(u.fallback!==void 0)s.value[a]=bn(u);else if(u.type!=="exact_optional"&&u.type!=="optional"&&u.type!=="nullish"&&(z(this,"key",s,n,{input:void 0,expected:`"${a}"`,path:[{type:"object",origin:"key",input:o,key:a,value:o[a]}]}),n.abortEarly))break}if(!s.issues||!n.abortEarly)for(const a in o)Fs(o,a)&&!(a in this.entries)&&(s.value[a]=o[a])}else z(this,"type",s,n);return s}}}function Se(e,t){return{kind:"schema",type:"nullish",reference:Se,expects:`(${e.expects} | null | undefined)`,async:!1,wrapped:e,default:t,get"~standard"(){return J(this)},"~run"(s,n){return(s.value===null||s.value===void 0)&&(this.default!==void 0&&(s.value=kt(this,s,n)),s.value===null||s.value===void 0)?(s.typed=!0,s):this.wrapped["~run"](s,n)}}}function he(e){return{kind:"schema",type:"number",reference:he,expects:"number",async:!1,message:e,get"~standard"(){return J(this)},"~run"(t,s){return typeof t.value=="number"&&!isNaN(t.value)?t.typed=!0:z(this,"type",t,s),t}}}function I(e,t){return{kind:"schema",type:"optional",reference:I,expects:`(${e.expects} | undefined)`,async:!1,wrapped:e,default:t,get"~standard"(){return J(this)},"~run"(s,n){return s.value===void 0&&(this.default!==void 0&&(s.value=kt(this,s,n)),s.value===void 0)?(s.typed=!0,s):this.wrapped["~run"](s,n)}}}function At(e,t,s){return{kind:"schema",type:"record",reference:At,expects:"Object",async:!1,key:e,value:t,message:s,get"~standard"(){return J(this)},"~run"(n,o){var a,u;const i=n.value;if(i&&typeof i=="object"){n.typed=!0,n.value={};for(const c in i)if(Fs(i,c)){const l=i[c],h=this.key["~run"]({value:c},o);if(h.issues){const m={type:"object",origin:"key",input:i,key:c,value:l};for(const g of h.issues)g.path=[m],(a=n.issues)==null||a.push(g);if(n.issues||(n.issues=h.issues),o.abortEarly){n.typed=!1;break}}const f=this.value["~run"]({value:l},o);if(f.issues){const m={type:"object",origin:"value",input:i,key:c,value:l};for(const g of f.issues)g.path?g.path.unshift(m):g.path=[m],(u=n.issues)==null||u.push(g);if(n.issues||(n.issues=f.issues),o.abortEarly){n.typed=!1;break}}(!h.typed||!f.typed)&&(n.typed=!1),h.typed&&(n.value[h.value]=f.value)}}else z(this,"type",n,o);return n}}}function y(e){return{kind:"schema",type:"string",reference:y,expects:"string",async:!1,message:e,get"~standard"(){return J(this)},"~run"(t,s){return typeof t.value=="string"?t.typed=!0:z(this,"type",t,s),t}}}function is(e){let t;if(e)for(const s of e)t?t.push(...s.issues):t=s.issues;return t}function Xe(e,t){return{kind:"schema",type:"union",reference:Xe,expects:_n(e.map(s=>s.expects),"|"),async:!1,options:e,message:t,get"~standard"(){return J(this)},"~run"(s,n){let o,i,a;for(const u of this.options){const c=u["~run"]({value:s.value},n);if(c.typed)if(c.issues)i?i.push(c):i=[c];else{o=c;break}else a?a.push(c):a=[c]}if(o)return o;if(i){if(i.length===1)return i[0];z(this,"type",s,n,{issues:is(i)}),s.typed=!0}else{if((a==null?void 0:a.length)===1)return a[0];z(this,"type",s,n,{issues:is(a)})}return s}}}function qt(){return{kind:"schema",type:"unknown",reference:qt,expects:"unknown",async:!1,get"~standard"(){return J(this)},"~run"(e){return e.typed=!0,e}}}function fe(e,t,s){const n=e["~run"]({value:t},Ct(s));if(n.issues)throw new mn(n.issues);return n.value}function ne(...e){return{...e[0],pipe:e,get"~standard"(){return J(this)},"~run"(t,s){for(const n of e)if(n.kind!=="metadata"){if(t.issues&&(n.kind==="schema"||n.kind==="transformation")){t.typed=!1;break}(!t.issues||!s.abortEarly&&!s.abortPipeEarly)&&(t=n["~run"](t,s))}return t}}}function ft(e,t,s){const n=e["~run"]({value:t},Ct(s));return{typed:n.typed,success:!n.issues,output:n.value,issues:n.issues}}var gn=Object.defineProperty,vn=(e,t,s)=>t in e?gn(e,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):e[t]=s,os=(e,t,s)=>vn(e,typeof t!="symbol"?t+"":t,s),yn=Object.defineProperty,wn=(e,t,s)=>t in e?yn(e,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):e[t]=s,dt=(e,t,s)=>wn(e,typeof t!="symbol"?t+"":t,s);function ks(e){return t=>t instanceof e}function Es(e,t){const s=class extends Error{constructor(...o){const i=typeof t=="function"?t(...o):typeof t=="string"?[t]:t||[];super(...i),this.name=e}};dt(s,"is",ks(s));let n=s;return Object.defineProperty(n,"name",{value:e}),n}function Fn(e,t,s){const n=class extends Es(e,s){constructor(...i){super(...i),dt(this,"data"),this.data=t(...i)}};dt(n,"is",ks(n));let o=n;return Object.defineProperty(o,"name",{value:e}),o}let Cn=class extends Es("CancelledError","Promise was canceled"){},xs=class extends Fn("TimeoutError",t=>({timeout:t}),(t,s)=>[`Timeout reached: ${t}ms`,{cause:s}]){};const Sn=Symbol("resolved");function kn(e){return{tag:Sn,value:e}}function as(e,t){return e.reject=t.reject,e.resolve=t.resolve,e}let Be=class _t extends Promise{constructor(t,s){let n,o,i,a;typeof t=="function"?(i=t,a=s||{}):a=t||{};let u,c;const l=()=>!!c,h=()=>!!u;let f={};const m=[],g=()=>{m.forEach(b=>b()),m.splice(0,m.length),f={}},w=new AbortController,F=()=>h()||l();super((b,v)=>{const{abortOnResolve:_=!0,abortOnReject:V=!0}=a;o=k=>{var P,M;F()||(b(k),u=[k],(P=f.resolved)==null||P.forEach(U=>U(k)),(M=f.finalized)==null||M.forEach(U=>U({kind:"resolved",result:k})),g(),_&&w.abort(kn(k)))},n=k=>{var P,M;F()||(v(k),c=[k],(P=f.rejected)==null||P.forEach(U=>U(k)),(M=f.finalized)==null||M.forEach(U=>U({kind:"rejected",reason:k})),g(),V&&w.abort(k))};const{abortSignal:L}=a;if(L){if(L.aborted)return n(L.reason);const k=()=>{n(L.reason)};L.addEventListener("abort",k,!0),m.push(()=>{L.removeEventListener("abort",k,!0)})}const{timeout:j}=a;if(j){const k=setTimeout(()=>{n(new xs(j))},j);m.push(()=>{clearTimeout(k)})}try{const k=()=>{},P=i&&i(o,n,{abortSignal:w.signal,get isRejected(){return l()},get isResolved(){return h()},on(M,U){if(u||c){if(M==="finalized"){const Ce=u?{kind:"resolved",result:u[0]}:{kind:"rejected",reason:c[0]};U(Ce)}else M==="resolved"&&u?U(u[0]):M==="rejected"&&c&&U(c[0]);return k}return f[M]||(f[M]=[]),f[M].push(U),()=>{const Ce=f[M]||[],$e=Ce.indexOf(U);$e>=0&&Ce.splice($e,1)}},get result(){return u==null?void 0:u[0]},get rejectReason(){return c==null?void 0:c[0]},throwIfRejected(){if(c)throw c[0]}});P instanceof Promise&&P.catch(n)}catch(k){n(k)}}),os(this,"reject"),os(this,"resolve"),this.reject=n,this.resolve=o}static fn(t,s){return new _t(async(n,o,i)=>{try{n(await t(i))}catch(a){o(a)}},s)}static resolve(t){return this.fn(()=>t)}static reject(t){return new _t((s,n)=>{n(t)})}cancel(){this.reject(new Cn)}catch(t){return this.then(void 0,t)}finally(t){return as(super.finally(t),this)}then(t,s){return as(super.then(t,s),this)}};var En=function(e,t,s){if(s||arguments.length===2)for(var n=0,o=t.length,i;n<o;n++)(i||!(n in t))&&(i||(i=Array.prototype.slice.call(t,0,n)),i[n]=t[n]);return e.concat(i||Array.prototype.slice.call(t))};function xn(e){return e}function Is(e,t,s,n,o,i,a,u,c){switch(arguments.length){case 1:return e;case 2:return function(){return t(e.apply(this,arguments))};case 3:return function(){return s(t(e.apply(this,arguments)))};case 4:return function(){return n(s(t(e.apply(this,arguments))))};case 5:return function(){return o(n(s(t(e.apply(this,arguments)))))};case 6:return function(){return i(o(n(s(t(e.apply(this,arguments))))))};case 7:return function(){return a(i(o(n(s(t(e.apply(this,arguments)))))))};case 8:return function(){return u(a(i(o(n(s(t(e.apply(this,arguments))))))))};case 9:return function(){return c(u(a(i(o(n(s(t(e.apply(this,arguments)))))))))}}}function p(e,t,s,n,o,i,a,u,c){switch(arguments.length){case 1:return e;case 2:return t(e);case 3:return s(t(e));case 4:return n(s(t(e)));case 5:return o(n(s(t(e))));case 6:return i(o(n(s(t(e)))));case 7:return a(i(o(n(s(t(e))))));case 8:return u(a(i(o(n(s(t(e)))))));case 9:return c(u(a(i(o(n(s(t(e))))))));default:{for(var l=arguments[0],h=1;h<arguments.length;h++)l=arguments[h](l);return l}}}var Ve=function(e,t){var s=typeof e=="number"?function(n){return n.length>=e}:e;return function(){var n=Array.from(arguments);return s(arguments)?t.apply(this,n):function(o){return t.apply(void 0,En([o],n,!1))}}},In={_tag:"None"},An=function(e){return{_tag:"Some",value:e}},qn=function(e){return e._tag==="Left"},As=function(e){return{_tag:"Left",left:e}},qs=function(e){return{_tag:"Right",right:e}},Tt={};function Tn(e,t){return function(s){return function(n){return e.ap(e.map(n,function(o){return function(i){return t.ap(o,i)}}),s)}}}function $n(e,t){return function(s){return function(n){return e.map(n,function(o){return t.map(o,s)})}}}function $t(e){return function(t,s){return function(n){return e.chain(n,function(o){return e.map(s(o),function(i){var a;return Object.assign({},o,(a={},a[t]=i,a))})})}}}var we=In,xe=An,Mn=function(e,t){return p(e,Bn(t))},Rn=function(e,t){return p(e,Ln(t))},Pn="Option",Bn=function(e){return function(t){return Re(t)?we:xe(e(t.value))}},Vn=xe,Ln=function(e){return function(t){return Re(t)||Re(e)?we:xe(t.value(e.value))}},jn=Ve(2,function(e,t){return Re(e)?we:t(e.value)}),On={URI:Pn,map:Mn,ap:Rn,chain:jn},Re=function(e){return e._tag==="None"},Dn=function(e,t){return function(s){return Re(s)?e():t(s.value)}},Mt=Dn,Un=Vn(Tt),us=$t(On),$=As,S=qs,Rt=Ve(2,function(e,t){return de(e)?e:t(e.right)}),Pt=function(e,t){return p(e,H(t))},Ts=function(e,t){return p(e,Hn(t))},Bt="Either",H=function(e){return function(t){return de(t)?t:S(e(t.right))}},Wn={URI:Bt,map:Pt},Gn=S,Nn=function(e){return function(t){return de(t)?t:de(e)?e:S(t.right(e.right))}},Hn=Nn,Kn={URI:Bt,map:Pt,ap:Ts},zn={URI:Bt,map:Pt,ap:Ts,chain:Rt},Jn=function(e,t){return function(s){return de(s)?$(e(s.left)):S(t(s.right))}},Qn=function(e){return function(t){return de(t)?$(e(t.left)):t}},de=qn,Vt=function(e,t){return function(s){return de(s)?e(s.left):t(s.right)}},Zn=Vt,ce=Vt,Xn=ce,Ie=function(e,t){try{return S(e())}catch(s){return $(t(s))}},Yn=Gn(Tt),er=$t(zn),cs=er,tr=Rt,sr=Rt;function nr(e){return Is(S,e.of)}function rr(e){return Is($,e.of)}function ir(e){return $n(e,Wn)}function or(e){return Tn(e,Kn)}function ar(e){return function(t,s){return e.chain(t,function(n){return de(n)?e.of(n):s(n.right)})}}function ur(e){return function(t,s,n){return e.map(t,Jn(s,n))}}function cr(e){return function(t,s){return function(n){return e.map(n,ce(t,s))}}}var lr=function(e){return Ie(function(){return JSON.parse(e)},xn)},Lt=function(e,t){return p(e,pr(t))},$s=function(e,t){return p(e,hr(t))},pr=function(e){return function(t){return function(){return Promise.resolve().then(t).then(e)}}},hr=function(e){return function(t){return function(){return Promise.all([Promise.resolve().then(t),Promise.resolve().then(e)]).then(function(s){var n=s[0],o=s[1];return n(o)})}}},jt=function(e){return function(){return Promise.resolve(e)}},fr=Ve(2,function(e,t){return function(){return Promise.resolve().then(e).then(function(s){return t(s)()})}}),Ot="Task",Dt={URI:Ot,map:Lt},Ms={of:jt},dr={URI:Ot,map:Lt,ap:$s},_r={URI:Ot,map:Lt,of:jt,ap:$s,chain:fr},mr=function(e,t,s,n){function o(i){return i instanceof s?i:new s(function(a){a(i)})}return new(s||(s=Promise))(function(i,a){function u(h){try{l(n.next(h))}catch(f){a(f)}}function c(h){try{l(n.throw(h))}catch(f){a(f)}}function l(h){h.done?i(h.value):o(h.value).then(u,c)}l((n=n.apply(e,t||[])).next())})},br=function(e,t){var s={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},n,o,i,a;return a={next:u(0),throw:u(1),return:u(2)},typeof Symbol=="function"&&(a[Symbol.iterator]=function(){return this}),a;function u(l){return function(h){return c([l,h])}}function c(l){if(n)throw new TypeError("Generator is already executing.");for(;a&&(a=0,l[0]&&(s=0)),s;)try{if(n=1,o&&(i=l[0]&2?o.return:l[0]?o.throw||((i=o.return)&&i.call(o),0):o.next)&&!(i=i.call(o,l[1])).done)return i;switch(o=0,i&&(l=[l[0]&2,i.value]),l[0]){case 0:case 1:i=l;break;case 4:return s.label++,{value:l[1],done:!1};case 5:s.label++,o=l[1],l=[0];continue;case 7:l=s.ops.pop(),s.trys.pop();continue;default:if(i=s.trys,!(i=i.length>0&&i[i.length-1])&&(l[0]===6||l[0]===2)){s=0;continue}if(l[0]===3&&(!i||l[1]>i[0]&&l[1]<i[3])){s.label=l[1];break}if(l[0]===6&&s.label<i[1]){s.label=i[1],i=l;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(l);break}i[2]&&s.ops.pop(),s.trys.pop();continue}l=t.call(e,s)}catch(h){l=[6,h],o=0}finally{n=i=0}if(l[0]&5)throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}},O=rr(Ms),R=nr(Ms),Ut=jt,Ye=cr(Dt),gr=Ye,Rs=function(e,t){return function(){return mr(void 0,void 0,void 0,function(){var s;return br(this,function(n){switch(n.label){case 0:return n.trys.push([0,2,,3]),[4,e().then(qs)];case 1:return[2,n.sent()];case 2:return s=n.sent(),[2,As(t(s))];case 3:return[2]}})})}},vr=function(e,t){return p(e,A(t))},yr=function(e,t){return p(e,wr(t))},A=ir(Dt),Le=Ve(3,ur(Dt)),wr=or(dr),Wt=Ve(2,ar(_r)),Fr=R,Cr="TaskEither",Sr={URI:Cr,map:vr,ap:yr,chain:Wt},kr=Fr(Tt),Er=$t(Sr),Ge=Er,Y=Wt,ue=Wt;function Ps(e){return e.replace(/[A-Z]/g,t=>`-${t.toLowerCase()}`)}function xr(e){return e.replace(/_[a-z]/g,t=>t[1].toUpperCase())}function Ir(e){return Object.entries(e).reduce((t,[s,n])=>(t[xr(s)]=n,t),{})}function ls(e){const t=Ir(e);for(const s in t){const n=t[s];n&&typeof n=="object"&&!(n instanceof Date)&&(t[s]=Array.isArray(n)?n.map(ls):ls(n))}return t}function Ar(e){return e.replace(/_([a-z])/g,(t,s)=>`-${s.toLowerCase()}`)}function Bs(e){return`tapps/${e}`}function Gt(e,t){sessionStorage.setItem(Bs(e),JSON.stringify(t))}function Vs(e){const t=sessionStorage.getItem(Bs(e));try{return t?JSON.parse(t):void 0}catch{}}function je(...e){const t=e.flat(1);return[t.push.bind(t),()=>{t.forEach(s=>{s()})}]}function qr(e,t){t||(t={});const{textColor:s,bgColor:n,shouldLog:o}=t,i=o===void 0?!0:o,a=typeof i=="boolean"?()=>i:i,u=(c,l,...h)=>{if(l||a()){const f="font-weight:bold;padding:0 5px;border-radius:100px",[m,g,w]={log:["#0089c3","white","INFO"],error:["#ff0000F0","white","ERR"],warn:["#D38E15","white","WARN"]}[c];console[c](`%c${w} ${Intl.DateTimeFormat("en-GB",{hour:"2-digit",minute:"2-digit",second:"2-digit",fractionalSecondDigits:3,timeZone:"UTC"}).format(new Date)}%c %c${e}`,`${f};background-color:${m};color:${g}`,"",`${f};${s?`color:${s};`:""}${n?`background-color:${n}`:""}`,...h)}};return[["log","forceLog"],["warn","forceWarn"],["error","forceError"]].reduce((c,[l,h])=>(c[l]=u.bind(void 0,l,!1),c[h]=u.bind(void 0,l,!0),c),{})}function Oe(e){const t=s=>{throw s};return typeof e=="function"?Be.resolve(p(e,Ye(t,s=>s))()):p(e,ce(t,s=>s))}function ee(e){return Object.assign((...t)=>Oe(e(...t)),e)}const Ee=Object.assign((e,t)=>p(Rs(()=>new Be((s,n,o)=>e(i=>s(S(i)),i=>s($(i)),o),t),s=>s),ue(ce(O,R))),{fn:(e,t)=>Ee((s,n,o)=>{const i=e(o);p(typeof i=="function"?i:Ut(i),gr(n,s))()},t)});var Tr=Object.defineProperty,$r=(e,t,s)=>t in e?Tr(e,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):e[t]=s,mt=(e,t,s)=>$r(e,typeof t!="symbol"?t+"":t,s);function Ls(e){return t=>t instanceof e}function N(e,t){const s=class extends Error{constructor(...i){const a=typeof t=="function"?t(...i):typeof t=="string"?[t]:t||[];super(...a),this.name=e}};mt(s,"is",Ls(s));let n=s;return Object.defineProperty(n,"name",{value:e}),n}function et(e,t,s){const n=class extends N(e,s){constructor(...a){super(...a),mt(this,"data"),this.data=t(...a)}};mt(n,"is",Ls(n));let o=n;return Object.defineProperty(o,"name",{value:e}),o}function Mr(e){const t=s=>{const n={};return new URLSearchParams(s).forEach((o,i)=>{const a=n[i];Array.isArray(a)?a.push(o):a===void 0?n[i]=o:n[i]=[a,o]}),fe(e,n)};return ne(Xe([y(),It(URLSearchParams)]),Qe(s=>{try{return t(s),!0}catch{return!1}},"The value doesn't match required schema"),ae(t))}function Rr(e){return ne(y(),Qe(t=>{try{return JSON.parse(t),!0}catch{return!1}},"Input is not a valid JSON value"),ae(JSON.parse),e)}function pe(e){return ne(y(),Rr(e))}function Nt(e){return ne(Xe([y(),It(URLSearchParams)]),Mr(e))}function tt(e){return t=>e.test(t)}const Pr=tt(/^#[\da-f]{3}$/i),Br=tt(/^#[\da-f]{4}$/i),Ne=tt(/^#[\da-f]{6}$/i),Vr=tt(/^#[\da-f]{8}$/i);function Lr(e){return[Ne,Vr,Pr,Br].some(t=>t(e))}function ps(e){let t="#";for(let s=0;s<e.length-1;s+=1)t+=e[1+s].repeat(2);return t}function Ht(e){const t=e.replace(/\s/g,"").toLowerCase();if(/^#[\da-f]{3}$/i.test(t))return S(ps(t.toLowerCase()+"f"));if(/^#[\da-f]{4}$/i.test(t))return S(ps(t.toLowerCase()));if(/^#[\da-f]{6}$/i.test(t))return S(t.toLowerCase()+"ff");if(/^#[\da-f]{8}$/i.test(t))return S(t.toLowerCase());const s=t.match(/^rgb\((\d{1,3}),(\d{1,3}),(\d{1,3})\)$/)||t.match(/^rgba\((\d{1,3}),(\d{1,3}),(\d{1,3}),(\d{1,3})\)$/);return s?S(s.slice(1).reduce((n,o)=>n+parseInt(o,10).toString(16).padStart(2,"0"),"#").padEnd(9,"f")):$(new Error(`Value "${e}" does not satisfy any of known RGB formats.`))}function jr(e){return p(Ht(e),H(t=>t.slice(0,7)))}const wa=ee(jr),Fa=ee(Ht);function Or(){return G({id:he(),photo_url:I(y()),type:y(),title:y(),username:I(y())})}function hs(){return G({added_to_attachment_menu:I(ye()),allows_write_to_pm:I(ye()),first_name:y(),id:he(),is_bot:I(ye()),is_premium:I(ye()),last_name:I(y()),language_code:I(y()),photo_url:I(y()),username:I(y())})}function Dr(){return G({auth_date:ne(y(),ae(e=>new Date(Number(e)*1e3)),Ze()),can_send_after:I(ne(y(),ae(Number),St())),chat:I(pe(Or())),chat_type:I(y()),chat_instance:I(y()),hash:y(),query_id:I(y()),receiver:I(pe(hs())),start_param:I(y()),signature:y(),user:I(pe(hs()))})}function js(){return Nt(Dr())}function bt(){return At(y(),ne(Xe([y(),he()]),ae(e=>typeof e=="number"?`#${(e&16777215).toString(16).padStart(6,"0")}`:e),Qe(Lr)))}function Ur(){const e=I(ne(y(),ae(t=>t==="1")));return G({tgWebAppBotInline:e,tgWebAppData:I(js()),tgWebAppDefaultColors:I(pe(bt())),tgWebAppFullscreen:e,tgWebAppPlatform:y(),tgWebAppShowSettings:e,tgWebAppStartParam:I(y()),tgWebAppThemeParams:pe(bt()),tgWebAppVersion:y()})}function Wr(){return Nt(Ur())}function Os(){return G({eventType:y(),eventData:I(qt())})}function Gr(e){return Ie(()=>fe(js(),e),t=>t)}function Kt(e){return Ie(()=>fe(Wr(),e),t=>t)}const Ca=ee(Gr),Nr=ee(Kt);function Ds(e,t){return t||(t=(s,n)=>JSON.stringify(n)),new URLSearchParams(Object.entries(e).reduce((s,[n,o])=>(Array.isArray(o)?s.push(...o.map(i=>[n,String(i)])):o!=null&&s.push([n,o instanceof Date?(o.getTime()/1e3|0).toString():typeof o=="string"||typeof o=="number"?String(o):typeof o=="boolean"?o?"1":"0":t(n,o)]),s),[])).toString()}function Hr(e){return Ds(e)}function Kr(e){return Ds(e,(t,s)=>t==="tgWebAppData"?Hr(s):JSON.stringify(s))}function zr(e){return{all:e=e||new Map,on:function(t,s){var n=e.get(t);n?n.push(s):e.set(t,[s])},off:function(t,s){var n=e.get(t);n&&(s?n.splice(n.indexOf(s)>>>0,1):e.set(t,[]))},emit:function(t,s){var n=e.get(t);n&&n.slice().map(function(o){o(s)}),(n=e.get("*"))&&n.slice().map(function(o){o(t,s)})}}}function Us(e){return Et(G({TelegramWebviewProxy:G({postEvent:xt()})}),e)}function Ws(){try{return window.self!==window.top}catch{return!0}}let Jr=class extends N("MethodUnsupportedError",(t,s)=>[`Method "${t}" is unsupported in Mini Apps version ${s}`]){},Qr=class extends N("MethodParameterUnsupportedError",(t,s,n)=>[`Parameter "${s}" of "${t}" method is unsupported in Mini Apps version ${n}`]){};class Zr extends et("LaunchParamsRetrieveError",t=>({errors:t}),t=>[["Unable to retrieve launch parameters from any known source. Perhaps, you have opened your app outside Telegram?","ðŸ“– Refer to docs for more information:","https://docs.telegram-mini-apps.com/packages/tma-js-bridge/environment","","Collected errors:",...t.map(({source:s,error:n})=>`Source: ${s} / ${n instanceof Error?n.message:String(n)}`)].join(`
`)]){}let Xr=class extends N("InvalidLaunchParamsError",(t,s)=>[`Invalid value for launch params: ${t}`,{cause:s}]){},Gs=class extends N("UnknownEnvError"){},Yr=class extends N("InvokeCustomMethodError",t=>[`Server returned error: ${t}`]){};const fs="launchParams";function ds(e){return e.replace(/^[^?#]*[?#]/,"").replace(/[?#]/g,"&")}function Pe(){return p(st(),tr(Kt))}const Aa=ee(Pe);function Ns(){return p(st(),H(e=>{const t=new URLSearchParams(e).get("tgWebAppData");return t?xe(t):we}))}function qa(){return p(Ns(),Xn(e=>{throw e},e=>e),Mt(()=>{},e=>e))}function st(){const e=[];for(const[t,s]of[[()=>ds(window.location.href),"window.location.href"],[()=>{const n=performance.getEntriesByType("navigation")[0];return n&&ds(n.name)},"performance navigation entries"],[()=>Vs(fs),"local storage"]]){const n=t();if(!n){e.push({source:s,error:new Error("Source is empty")});continue}const o=p(Kt(n),Zn(i=>i,()=>!0));if(typeof o!="boolean"){e.push({source:s,error:o});continue}return Gt(fs,n),S(n)}return $(new Zr(e))}const Ta=ee(st);function ei(e,t){const s=new Map,n=zr(),o=(i,a,u=!1)=>{const c=s.get(i)||new Map;s.set(i,c);const l=c.get(a)||[];c.set(a,l);const h=l.findIndex(f=>f[1]===u);if(h>=0&&(n.off(i,l[h][0]),l.splice(h,1),!l.length&&(c.delete(a),!c.size))){const f=s.size;s.delete(i),f&&!s.size&&t()}};return{on(i,a,u){!s.size&&e();const c=()=>{o(i,a,u)},l=(...m)=>{u&&c(),i==="*"?a({name:m[0],payload:m[1]}):a(...m)};n.on(i,l);const h=s.get(i)||new Map;s.set(i,h);const f=h.get(a)||[];return h.set(a,f),f.push([l,u||!1]),c},off:o,emit:n.emit,clear(){const i=s.size;n.all.clear(),s.clear(),i&&t()}}}function ut(e,t){window.dispatchEvent(new MessageEvent("message",{data:JSON.stringify({eventType:e,eventData:t}),source:window.parent}))}const gt=D(!1),Hs=D("https://web.telegram.org"),ti=e=>{_e().log("Event received:",e)},si=C(gt);function $a(e){e!==gt()&&(gt.set(e),(e?X:Ae)("*",ti))}const ni=C(Hs);function Ma(e){Hs.set(e),_e().log("New target origin set",e)}const He=D((...e)=>{window.parent.postMessage(...e)}),_e=D(qr("Bridge",{bgColor:"#9147ff",textColor:"white",shouldLog:si}));function ct(e,t,s){const n=[s],o=e[t];typeof o=="function"&&n.push(o);const i=(...u)=>{n.forEach(c=>c(...u))},a=Object.assign((...u)=>{i(...u)},{unwrap(){const{length:u}=n;if(u===1){delete e[t];return}if(u===2){ms(e,t,n[1]);return}n.unshift(1),ms(e,t,i)}});Ks(e,t,()=>a,u=>n.push(u))}function _s(e,t){const s=e[t];Ks(e,t,()=>s,n=>{Object.entries(n).forEach(([o,i])=>{s[o]=i})})}function Ks(e,t,s,n){Object.defineProperty(e,t,{enumerable:!0,configurable:!0,get:s,set:n})}function ms(e,t,s){Object.defineProperty(e,t,{enumerable:!0,configurable:!0,writable:!0,value:s})}const ri={clipboard_text_received:G({req_id:y(),data:Se(y())}),custom_method_invoked:G({req_id:y(),result:I(qt()),error:I(y())}),popup_closed:Se(G({button_id:Se(y(),()=>{})}),{}),viewport_changed:Se(G({height:he(),width:Se(he(),()=>window.innerWidth),is_state_stable:ye(),is_expanded:ye()}),()=>({height:window.innerHeight,is_state_stable:!0,is_expanded:!0})),theme_changed:G({theme_params:bt()})};function bs(e){if(e.source!==window.parent)return;let t;try{t=fe(pe(Os()),e.data)}catch{return}const{eventType:s,eventData:n}=t,o=ri[s];let i;try{i=o?fe(o,n):n}catch(a){return _e().forceError([`An error occurred processing the "${s}" event from the Telegram application.`,"Please, file an issue here:","https://github.com/Telegram-Mini-Apps/tma.js/issues/new/choose"].join(`
`),t,a)}ii(s,i)}const{on:X,off:Ae,emit:ii,clear:Ra}=ei(()=>{const e=window;!e.TelegramGameProxy&&(e.TelegramGameProxy={}),ct(e.TelegramGameProxy,"receiveEvent",ut),_s(e,"TelegramGameProxy"),!e.Telegram&&(e.Telegram={}),!e.Telegram.WebView&&(e.Telegram.WebView={}),ct(e.Telegram.WebView,"receiveEvent",ut),_s(e.Telegram,"WebView"),ct(e,"TelegramGameProxy_receiveEvent",ut),window.addEventListener("message",bs)},()=>{[["TelegramGameProxy_receiveEvent"],["TelegramGameProxy","receiveEvent"],["Telegram","WebView","receiveEvent"]].forEach(e=>{const t=window;let s=[void 0,t];for(const i of e)if(s=[s[1],s[1][i]],!s[1])return;const[n,o]=s;"unwrap"in o&&(o.unwrap(),n&&n!==t&&!Object.keys(n).length&&delete t[e[0]])}),window.removeEventListener("message",bs)}),oi=(...e)=>He()(...e);function ai(e,t){p(nt(e,t),Qn(s=>{throw s}))}function nt(e,t){_e().log("Posting event:",t?{eventType:e,eventData:t}:{eventType:e});const s=window,n=JSON.stringify({eventType:e,eventData:t});return Ws()?(oi(n,ni()),S(void 0)):Us(s)?(s.TelegramWebviewProxy.postEvent(e,JSON.stringify(t)),S(void 0)):Et(G({external:G({notify:xt()})}),s)?(s.external.notify(n),S(void 0)):$(new Gs)}function zt(e,t,s={}){const{capture:n=()=>!0,postEvent:o=nt}=s,i=D(),[a,u]=je();(Array.isArray(t)?t:[t]).forEach(l=>{a(X(l,h=>{const f=Array.isArray(t);n(f?{event:l,payload:h}:h)&&i.set([f?{event:l,payload:h}:h])}))});const c=l=>(u(),l);return p(async()=>o(e,s.params),ue(()=>Ee((l,h,f)=>{const m=i();if(m)return l(m[0]);const g=F=>{F&&l(F[0])},w=()=>{i.unsub(g)};i.sub(g),f.on("finalized",w)},s)),Le(c,c))}function Pa(e,t){const s=zs(e,t);return typeof s=="function"?Be.fn(()=>Oe(s)):s}function zs(e,t){const s=Us(window);if(!e)return s||p(st(),ce(()=>!1,()=>!0));if(s)return R(!0);const{timeout:n=100}=t||{};return p(zt("web_app_request_theme","theme_changed",{...t,timeout:n}),Ye(o=>xs.is(o)||Gs.is(o)?S(!1):$(o),()=>S(!0)))}function Ba({launchParams:e,onEvent:t,resetPostMessage:s}={}){if(e){const i=typeof e=="string"||e instanceof URLSearchParams?e.toString():Kr({...e,tgWebAppData:void 0})+(e.tgWebAppData?`&tgWebAppData=${encodeURIComponent(e.tgWebAppData.toString())}`:"");try{Nr(i)}catch(a){throw new Xr(i,a)}Gt("launchParams",i)}if(Ws()){if(!t)return;s&&He.reset();const i=He();He.set((...a)=>{const[u]=a,c=()=>{i(...a)};try{const l=fe(pe(Os()),u);t({name:l.eventType,params:l.eventData},c)}catch{c()}});return}const n=window.TelegramWebviewProxy||{},o=n.postEvent||(()=>{});window.TelegramWebviewProxy={...n,postEvent(i,a){const u=()=>{o(i,a)};t?t({name:i,params:a?JSON.parse(a):void 0},u):u()}},_e().log("Environment was mocked by the mockTelegramEnv function")}function Js(e){return({req_id:t})=>t===e}const gs={"6.0":["iframe_ready","iframe_will_reload","web_app_close","web_app_data_send","web_app_expand","web_app_open_link","web_app_ready","web_app_request_theme","web_app_request_viewport","web_app_setup_main_button","web_app_setup_closing_behavior"],6.1:["web_app_open_tg_link","web_app_open_invoice","web_app_setup_back_button","web_app_set_background_color","web_app_set_header_color","web_app_trigger_haptic_feedback"],6.2:["web_app_open_popup"],6.4:["web_app_close_scan_qr_popup","web_app_open_scan_qr_popup","web_app_read_text_from_clipboard",{method:"web_app_open_link",param:"try_instant_view"}],6.7:["web_app_switch_inline_query"],6.9:["web_app_invoke_custom_method","web_app_request_write_access","web_app_request_phone",{method:"web_app_set_header_color",param:"color"}],"6.10":["web_app_setup_settings_button"],7.2:["web_app_biometry_get_info","web_app_biometry_open_settings","web_app_biometry_request_access","web_app_biometry_request_auth","web_app_biometry_update_token"],7.6:[{method:"web_app_open_link",param:"try_browser"},{method:"web_app_close",param:"return_back"}],7.7:["web_app_setup_swipe_behavior"],7.8:["web_app_share_to_story"],"7.10":["web_app_setup_secondary_button","web_app_set_bottom_bar_color",{method:"web_app_setup_main_button",param:"has_shine_effect"}],"8.0":["web_app_request_safe_area","web_app_request_content_safe_area","web_app_request_fullscreen","web_app_exit_fullscreen","web_app_set_emoji_status","web_app_add_to_home_screen","web_app_check_home_screen","web_app_request_emoji_status_access","web_app_check_location","web_app_open_location_settings","web_app_request_file_download","web_app_request_location","web_app_send_prepared_message","web_app_start_accelerometer","web_app_start_device_orientation","web_app_start_gyroscope","web_app_stop_accelerometer","web_app_stop_device_orientation","web_app_stop_gyroscope","web_app_toggle_orientation_lock"],"9.0":["web_app_device_storage_clear","web_app_device_storage_get_key","web_app_device_storage_save_key","web_app_secure_storage_clear","web_app_secure_storage_get_key","web_app_secure_storage_restore_key","web_app_secure_storage_save_key"],9.1:["web_app_hide_keyboard"]};function vs(e,t){return Object.keys(gs).find(s=>gs[s].some(n=>t?typeof n=="object"&&n.method===e&&n.param===t:n===e))||null}function ys(e){return e.split(".").map(Number)}function ui(e,t){const s=ys(e),n=ys(t),o=Math.max(s.length,n.length);for(let i=0;i<o;i+=1){const a=s[i]||0,u=n[i]||0;if(a!==u)return a>u?1:-1}return 0}function me(e,t,s){const n=s?vs(e,t):vs(e);return n?ui(n,s||t)<=0:!1}function Va(e,t="strict"){const s=typeof t=="function"?t:n=>{const{method:o,version:i}=n,a="param"in n?new Qr(o,n.param,i):new Jr(o,i);if(t==="strict")throw a;return _e().forceWarn(a.message)};return(n,o)=>me(n,e)?n==="web_app_set_header_color"&&Et(G({color:Cs()}),o)&&!me(n,"color",e)?s({version:e,method:n,param:"color"}):ai(n,o):s({version:e,method:n})}function ci(e,t,s,n){return p(zt("web_app_invoke_custom_method","custom_method_invoked",{...n||{},params:{method:e,params:t,req_id:s},capture:Js(s)}),Y(({result:o,error:i})=>i?O(new Yr(i)):R(o)))}function li(e,t,s={}){const{capture:n=()=>!0,postEvent:o=nt}=s,i=D(),[a,u]=je();(Array.isArray(t)?t:[t]).forEach(l=>{a(X(l,h=>{(Array.isArray(t)?n({event:l,payload:h}):n(h))&&i.set([h])}))});const c=l=>(u(),l);return p(async()=>o(e,s.params),ue(()=>Ee((l,h,f)=>{const m=i();if(m)return l(m[0]);const g=F=>{F&&l(F[0])},w=()=>{i.unsub(g)};i.sub(g),f.on("finalized",w)},s)),Le(c,c))}function La(){Object.hasOwn||(Object.hasOwn=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)})}function Qs(e){return Ie(()=>decodeURIComponent(atob(e.replace(/-/g,"+").replace(/_/g,"/")).split("").map(t=>"%"+("00"+t.charCodeAt(0).toString(16)).slice(-2)).join("")),t=>t)}const ja=ee(Qs);function Zs(e){return btoa(encodeURIComponent(e).replace(/%([0-9A-F]{2})/g,(t,s)=>String.fromCharCode(parseInt(`0x${s}`)))).replace(/\+/g,"-").replace(/\//g,"_")}function pi(e){const t=Zs(typeof e=="string"?e:JSON.stringify(e));return t.length>512?$(new Error("Value is too long for start parameter")):S(t)}const Oa=ee(pi);function Da(e,t){return Oe(hi(e,typeof t=="function"?s=>Ie(()=>t(s),n=>n):t))}function hi(e,t){return p(Qs(e),sr(s=>t?typeof t=="function"?t(s):lr(s):S(s)))}function Ua(e){return Zs(e).length<=512}var fi=Object.defineProperty,di=(e,t,s)=>t in e?fi(e,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):e[t]=s,r=(e,t,s)=>di(e,typeof t!="symbol"?t+"":t,s);function Z(e){return typeof e=="function"?e():e}class De{constructor({onMounted:t,restoreState:s,initialState:n,onUnmounted:o,isPageReload:i}){r(this,"_isMounted",D(!1)),r(this,"isMounted",C(this._isMounted)),r(this,"mount"),r(this,"unmount"),this.mount=()=>{if(this.isMounted())return S(void 0);const a=Z(i)?s():void 0,u=a?S(a):typeof n=="function"?n():S(n);return p(u,H(c=>{ze(()=>{this._isMounted.set(!0),t==null||t(c)})}))},this.unmount=()=>{this._isMounted()&&ze(()=>{this._isMounted.set(!1),o==null||o()})}}}function vt(e){const t={};for(const s in e){const n=e[s];n!==void 0&&(t[s]=n)}return t}function lt(e,t){const s=Object.keys(e),n=Object.keys(t);return s.length!==n.length?!1:s.every(o=>Object.prototype.hasOwnProperty.call(t,o)&&e[o]===t[o])}class be{constructor({initialState:t,onChange:s}){r(this,"_state"),r(this,"state"),r(this,"setState",n=>{const o={...this.state(),...vt(n)};lt(o,this.state())||this._state.set(o)}),this._state=D(t,{equals:lt}),this.state=C(this._state),this.state.sub(s)}getter(t){return C(()=>this._state()[t])}hasDiff(t){return!lt({...this.state(),...vt(t)},this.state())}}function re(e,t){return C(()=>me(e,Z(t)))}function d(e){return Object.assign(ee(e),{ifAvailable(...t){return p(e.ifAvailable(...t),Mt(()=>({ok:!1}),s=>({ok:!0,data:Oe(s)})))}})}function Fe(e){return[e]}class Ke extends et("ValidationError",(t,s)=>({input:t,issues:s}),"Validation error"){}class Jt extends N("CSSVarsBoundError","CSS variables are already bound"){}class _i extends et("DeviceStorageMethodError",t=>({error:t}),t=>[t]){}class mi extends et("SecureStorageMethodError",t=>({error:t}),t=>[t]){}class bi extends N("NotAvailableError",Fe){}class Wa extends N("InvalidEnvError",Fe){}class gi extends N("FunctionNotAvailableError",Fe){}class se extends N("InvalidArgumentsError",(t,s)=>[t,{cause:s}]){}class Qt extends N("ConcurrentCallError",Fe){}class vi extends N("SetEmojiStatusError",t=>[`Failed to set emoji status: ${t}`]){}class Xs extends N("AccessDeniedError",Fe){}class yi extends N("FullscreenFailedError",Fe){}class wi extends N("ShareMessageError",Fe){}class Fi extends N("UnknownThemeParamsKeyError",t=>[`Unknown theme params key passed: ${t}`]){}function B(e,t){const s=C(()=>Z(t.version)||"100"),n=C(()=>Z(t.isTma)),{requires:o,returns:i}=t,a=o?typeof o=="object"?o:{every:[o]}:void 0,u=b=>{if(!t.supports)return!0;const v=t.supports[b];return me(v.method,v.param,s())},c=()=>{if(!a)return;const[b,v]="every"in a?["every",a.every]:["some",a.some];for(let _=0;_<v.length;_++){const V=v[_],L=typeof V=="function"?V():me(V,s())?void 0:`it is unsupported in Mini Apps version ${s()}`;if(L&&(b==="every"||_===v.length-1))return L}},l=(...b)=>{for(const v in t.supports)if(t.supports[v].shouldCheck(...b)&&!u(v))return`option ${v} is not supported in Mini Apps version ${s()}`},h=C(()=>!c()),f=C(()=>s()!=="0.0"),m=C(()=>t.isMounted?t.isMounted():!0),g=C(()=>n()&&f()&&h()&&m()),w=b=>{const v=new gi(b);return["task","promise"].includes(t.returns)?O(v):$(v)},F=(...b)=>i==="plain"?Ie(()=>e(...b),v=>v):i==="promise"?Rs(()=>e(...b),v=>v):e(...b);return Object.assign((...b)=>{var v;const _="Unable to call function:";if(!n())return w(`${_} it can't be called outside Mini Apps`);if(!f())return w(`${_} the SDK was not initialized. Use the SDK init() function`);const V=c();if(V)return w(`${_} ${V}`);const L=l(...b);if(L)return w(`${_} ${L}`);if(!m()){const j=(v=t.isMounting)!=null&&v.call(t)?"mounting. Wait for the mount completion":"unmounted. Use the mount() method";return w(`${_} the component is ${j}`)}return F(...b)},e,{isAvailable:g,ifAvailable(...b){return g()?xe(F(...b)):we}},a?{isSupported:h}:{},t.supports?{supports:u}:{})}function T(e){return t=>B(t,e)}class rt{constructor({isTma:t,storage:s,onClick:n,offClick:o,initialState:i,isPageReload:a,postEvent:u,payload:c,method:l,version:h}){r(this,"isMounted"),r(this,"isSupported"),r(this,"state"),r(this,"stateSetters"),r(this,"stateBoolSetters"),r(this,"setStateFp"),r(this,"setState"),r(this,"onClickFp"),r(this,"onClick"),r(this,"offClickFp"),r(this,"offClick"),r(this,"mountFp"),r(this,"mount"),r(this,"unmount");const f=new be({initialState:i,onChange(b){s.set(b)}}),m=new De({initialState:i,isPageReload:a,onMounted:f.setState,restoreState:s.get}),g={version:h,requires:l,isTma:t},w=T({...g,returns:"plain"}),F=T({...g,returns:"either",isMounted:m.isMounted});this.isMounted=m.isMounted,this.isSupported=re(l,h),this.state=f.state,this.setStateFp=F(b=>{const v={...this.state(),...vt(b)};return f.hasDiff(v)?p(u(l,c(v)),H(()=>{f.setState(v)})):S(void 0)}),this.setState=d(this.setStateFp),this.onClickFp=w(n),this.onClick=d(this.onClickFp),this.offClickFp=w(o),this.offClick=d(this.offClickFp),this.mountFp=w(()=>{const b=()=>{};return p(m.mount(),ce(b,b))}),this.mount=d(this.mountFp),this.unmount=m.unmount,this.stateSetters=b=>{const v=F(_=>this.setStateFp({[b]:_}));return[d(v),v]},this.stateBoolSetters=b=>{const[,v]=this.stateSetters(b),_=F(()=>v(!1)),V=F(()=>v(!0));return[[d(_),_],[d(V),V]]}}stateGetter(t){return C(()=>this.state()[t])}}class Ci{constructor(t){r(this,"isVisible"),r(this,"isMounted"),r(this,"isSupported"),r(this,"hideFp"),r(this,"hide"),r(this,"showFp"),r(this,"show"),r(this,"onClickFp"),r(this,"onClick"),r(this,"offClickFp"),r(this,"offClick"),r(this,"mountFp"),r(this,"mount"),r(this,"unmount");const s=new rt({...t,method:"web_app_setup_back_button",payload:n=>({is_visible:n.isVisible}),initialState:{isVisible:!1}});this.isVisible=s.stateGetter("isVisible"),this.isMounted=s.isMounted,this.isSupported=s.isSupported,[[this.hide,this.hideFp],[this.show,this.showFp]]=s.stateBoolSetters("isVisible"),this.onClick=s.onClick,this.onClickFp=s.onClickFp,this.offClick=s.offClick,this.offClickFp=s.offClickFp,this.mount=s.mount,this.mountFp=s.mountFp,this.unmount=s.unmount}}function E(){return{isTma:C(()=>zs())}}function qe(e){return t=>({...t,...Z(e)})}function Ue(e,t){return D(e,t)}const Ys=Ue(nt),Te=(...e)=>Ys()(...e),Si=(...e)=>Oe(Te(...e)),K=qe({postEvent:Te});function ki(e){return{get:()=>Vs(e),set(t){Gt(e,t)}}}function Ei(){return performance.getEntriesByType("navigation")[0]}function xi(){const e=Ei();return!!e&&e.type==="reload"}function ge(e){return qe({storage:ki(e),isPageReload:xi})}const yt=Ue("0.0"),x=qe({version:yt});function Zt(e,t){return{...p(E(),K,x,ge(e)),onClick(s,n){return X(t,s,n)},offClick(s,n){Ae(t,s,n)}}}const Ga=new Ci(Zt("backButton","back_button_pressed"));class Xt{constructor({initialState:t,onMounted:s,restoreState:n,onUnmounted:o,isPageReload:i}){r(this,"_isMounted",D(!1)),r(this,"isMounted",C(this._isMounted)),r(this,"mount"),r(this,"unmount"),this.mount=a=>{if(this._isMounted())return R(void 0);const u=Z(i)?n():void 0;return p(u?R(u):t(a),A(c=>{this._isMounted()||ze(()=>{this._isMounted.set(!0),s==null||s(c)})}))},this.unmount=()=>{this._isMounted()&&ze(()=>{this._isMounted.set(!1),o==null||o()})}}}function ws(){return new bi("Biometry is not available")}function pt(e){let t=!1,s=!1,n="",o=!1,i="",a=!1;return e.available&&(t=!0,s=e.token_saved,n=e.device_id,o=e.access_requested,i=e.type,a=e.access_granted),{available:t,tokenSaved:s,deviceId:n,type:i,accessGranted:a,accessRequested:o}}class Ii{constructor({version:t,request:s,postEvent:n,storage:o,onInfoReceived:i,offInfoReceived:a,isTma:u,isPageReload:c}){r(this,"isAvailable"),r(this,"isSupported"),r(this,"isMounted"),r(this,"state"),r(this,"authenticateFp"),r(this,"authenticate"),r(this,"openSettingsFp"),r(this,"openSettings"),r(this,"requestAccessFp"),r(this,"requestAccess"),r(this,"updateTokenFp"),r(this,"updateToken"),r(this,"mountFp"),r(this,"mount"),r(this,"unmount");const l=b=>{h.setState(pt(b))},h=new be({initialState:{available:!1,type:"unknown",accessGranted:!1,accessRequested:!1,deviceId:"",tokenSaved:!1},onChange:o.set}),f=new Xt({initialState(b){return p(s("web_app_biometry_get_info","biometry_info_received",b),A(pt))},isPageReload:c,onMounted(b){h.setState(b),i(l)},onUnmounted(){a(l)},restoreState:o.get}),m={version:t,requires:"web_app_biometry_request_auth",isTma:u},g=T({...m,returns:"either"}),w=T({...m,returns:"task"}),F=T({...m,isMounted:f.isMounted,returns:"task"});this.isAvailable=h.getter("available"),this.isMounted=f.isMounted,this.isSupported=re("web_app_biometry_request_auth",t),this.state=h.state,this.unmount=f.unmount,this.mountFp=w(f.mount),this.authenticateFp=F(b=>this.isAvailable()?p(s("web_app_biometry_request_auth","biometry_auth_requested",{...b,params:{reason:((b||{}).reason||"").trim()}}),A(v=>(h.setState({token:v.token}),v))):O(ws())),this.openSettingsFp=g(()=>n("web_app_biometry_open_settings")),this.requestAccessFp=F(b=>p(s("web_app_biometry_request_access","biometry_info_received",{...b,params:{reason:((b||{}).reason||"").trim()}}),Y(v=>{const _=pt(v);return _.available?(h.setState(_),R(_.accessRequested)):O(ws())}))),this.updateTokenFp=F((b={})=>{var v;return p(s("web_app_biometry_update_token","biometry_token_updated",{...b,params:{token:b.token||"",reason:(v=b.reason)==null?void 0:v.trim()}}),A(_=>_.status))}),this.authenticate=d(this.authenticateFp),this.openSettings=d(this.openSettingsFp),this.requestAccess=d(this.requestAccessFp),this.updateToken=d(this.updateTokenFp),this.mount=d(this.mountFp)}}const Ai=(e,t,s)=>li(e,t,{postEvent:Te,...s}),en=(e,t,s)=>zt(e,t,{postEvent:Te,...s}),Na=(...e)=>Be.fn(()=>Ai(...e)()),Ha=(...e)=>Be.fn(()=>en(...e)()),Q=qe({request:en});function qi(){return new Ii({...p(E(),K,x,Q,ge("biometry")),offInfoReceived(e){Ae("biometry_info_received",e)},onInfoReceived(e){return X("biometry_info_received",e)}})}const Ka=qi();class Ti{constructor({postEvent:t,storage:s,isTma:n,isPageReload:o}){r(this,"isConfirmationEnabled"),r(this,"isMounted"),r(this,"mountFp"),r(this,"mount"),r(this,"unmount"),r(this,"disableConfirmationFp"),r(this,"disableConfirmation"),r(this,"enableConfirmationFp"),r(this,"enableConfirmation");const i=new be({initialState:{isConfirmationEnabled:!1},onChange(f){s.set(f)}}),a=new De({onMounted:i.setState,restoreState:s.get,initialState:{isConfirmationEnabled:!1},isPageReload:o}),u={requires:"web_app_setup_closing_behavior",isTma:n},c=T({...u,returns:"plain"}),l=T({...u,returns:"either",isMounted:a.isMounted}),h=f=>f===this.isConfirmationEnabled()?S(void 0):(i.setState({isConfirmationEnabled:f}),t("web_app_setup_closing_behavior",{need_confirmation:f}));this.isConfirmationEnabled=i.getter("isConfirmationEnabled"),this.isMounted=a.isMounted,this.disableConfirmationFp=l(()=>h(!1)),this.enableConfirmationFp=l(()=>h(!0)),this.mountFp=c(()=>{const f=()=>{};return p(a.mount(),ce(f,f))}),this.unmount=a.unmount,this.disableConfirmation=d(this.disableConfirmationFp),this.enableConfirmation=d(this.enableConfirmationFp),this.mount=d(this.mountFp)}}function $i(){return new Ti(p(E(),ge("closingBehavior"),K))}const za=$i();class Mi{constructor({version:t,isTma:s,invokeCustomMethod:n}){r(this,"isSupported"),r(this,"deleteItemFp"),r(this,"deleteItem"),r(this,"getItemFp"),r(this,"getItem"),r(this,"getItemsFp"),r(this,"getItems"),r(this,"getKeysFp"),r(this,"getKeys"),r(this,"setItemFp"),r(this,"setItem"),r(this,"clearFp"),r(this,"clear");const o=T({version:t,requires:"web_app_invoke_custom_method",isTma:s,returns:"task"});this.isSupported=re("web_app_invoke_custom_method",t),this.deleteItemFp=o((i,a)=>{const u=Array.isArray(i)?i:[i];return p(u.length?n("deleteStorageValues",{keys:u},a):R(void 0),A(()=>{}))}),this.getItemFp=o((i,a)=>p(this.getItemsFp([i],a),A(u=>u[i]||""))),this.getItemsFp=o((i,a)=>p(i.length?n("getStorageValues",{keys:i},a):R({}),A(u=>({...i.reduce((c,l)=>(c[l]="",c),{}),...fe(At(y(),y()),u)})))),this.getKeysFp=o(i=>p(n("getStorageKeys",{},i),A(a=>fe(Ss(y()),a)))),this.setItemFp=o((i,a,u)=>p(n("saveStorageValue",{key:i,value:a},u),A(()=>{}))),this.clearFp=o(i=>p(this.getKeysFp(i),Y(this.deleteItemFp))),this.deleteItem=d(this.deleteItemFp),this.getItem=d(this.getItemFp),this.getItems=d(this.getItemsFp),this.getKeys=d(this.getKeysFp),this.setItem=d(this.setItemFp),this.clear=d(this.clearFp)}}const ht=Ue(0);function Yt(){return ht.set(ht()+1),ht().toString()}function Ri(e,t,s){return ci(e,t,Yt(),{...s||{},postEvent:Te})}const es=qe({invokeCustomMethod:Ri});function Pi(){return new Mi(p(E(),x,es))}const Ja=Pi();class Bi{constructor({isTma:t,request:s,version:n,createRequestId:o}){r(this,"getItemFp"),r(this,"getItem"),r(this,"setItemFp"),r(this,"setItem"),r(this,"deleteItemFp"),r(this,"deleteItem"),r(this,"clearFp"),r(this,"clear");const i=T({version:n,requires:"web_app_device_storage_get_key",isTma:t,returns:"task"}),a=(u,c,l)=>{const h=o();return p(s(u,["device_storage_failed",c],{params:{...l,req_id:h},capture:f=>"payload"in f?f.payload.req_id===h:!0}),Y(f=>f.event==="device_storage_failed"?O(new _i(f.payload.error||"UNKNOWN_ERROR")):R(f.payload)))};this.getItemFp=i(u=>p(a("web_app_device_storage_get_key","device_storage_key_received",{key:u}),A(c=>c.value))),this.setItemFp=i((u,c)=>p(a("web_app_device_storage_save_key","device_storage_key_saved",{key:u,value:c}),A(()=>{}))),this.deleteItemFp=i(u=>this.setItemFp(u,null)),this.clearFp=i(()=>p(a("web_app_device_storage_clear","device_storage_cleared",{}),A(()=>{}))),this.getItem=d(this.getItemFp),this.setItem=d(this.setItemFp),this.deleteItem=d(this.deleteItemFp),this.clear=d(this.clearFp)}}const tn=qe({createRequestId:Yt});function Vi(){return new Bi(p(E(),x,Q,tn))}const Qa=Vi();function Li({request:e,...t}){return B(s=>p(e("web_app_request_emoji_status_access","emoji_status_access_requested",s),A(n=>n.status)),{...t,requires:"web_app_request_emoji_status_access",returns:"task"})}function ji(){return Li(p(E(),x,Q))}const Oi=ji(),Za=d(Oi);function Di({request:e,...t}){return B((s,n)=>p(e("web_app_set_emoji_status",["emoji_status_set","emoji_status_failed"],{params:{custom_emoji_id:s,duration:(n||{}).duration},...n}),ue(o=>o.event==="emoji_status_failed"?O(new vi(o.payload.error)):R(void 0))),{...t,requires:"web_app_set_emoji_status",returns:"task"})}function Ui(){return Di(p(E(),Q,x))}const Wi=Ui(),Xa=d(Wi);class Gi{constructor({postEvent:t,isTma:s,version:n}){r(this,"isSupported"),r(this,"impactOccurredFp"),r(this,"impactOccurred"),r(this,"notificationOccurredFp"),r(this,"notificationOccurred"),r(this,"selectionChangedFp"),r(this,"selectionChanged");const o="web_app_trigger_haptic_feedback",i=T({requires:o,isTma:s,version:n,returns:"plain"});this.isSupported=re(o,n),this.impactOccurredFp=i(a=>t(o,{type:"impact",impact_style:a})),this.notificationOccurredFp=i(a=>t(o,{type:"notification",notification_type:a})),this.selectionChangedFp=i(()=>t(o,{type:"selection_change"})),this.impactOccurred=d(this.impactOccurredFp),this.notificationOccurred=d(this.notificationOccurredFp),this.selectionChanged=d(this.selectionChangedFp)}}function Ni(){return new Gi(p(E(),K,x))}const Ya=Ni();function Hi({postEvent:e,...t}){return B(()=>e("web_app_add_to_home_screen"),{...t,requires:"web_app_add_to_home_screen",returns:"either"})}function Ki(){return Hi(p(E(),x,K))}const zi=Ki(),eu=d(zi);function Ji({request:e,...t}){return B(s=>p(e("web_app_check_home_screen","home_screen_checked",s),A(n=>n.status||"unknown")),{...t,requires:"web_app_check_home_screen",returns:"task"})}function Qi(){return Ji(p(E(),x,Q))}const Zi=Qi(),tu=d(Zi);class Xi{constructor({retrieveInitData:t}){r(this,"_state",D()),r(this,"_raw",D()),r(this,"state",C(this._state)),r(this,"authDate",this.fromState("auth_date")),r(this,"canSendAfter",this.fromState("can_send_after")),r(this,"canSendAfterDate",C(()=>{const s=this.authDate(),n=this.canSendAfter();return n&&s?new Date(s.getTime()+n*1e3):void 0})),r(this,"chat",this.fromState("chat")),r(this,"chatType",this.fromState("chat_type")),r(this,"chatInstance",this.fromState("chat_instance")),r(this,"hash",this.fromState("hash")),r(this,"queryId",this.fromState("query_id")),r(this,"raw",C(this._raw)),r(this,"receiver",this.fromState("receiver")),r(this,"signature",this.fromState("signature")),r(this,"startParam",this.fromState("start_param")),r(this,"user",this.fromState("user")),r(this,"restoreFp"),r(this,"restore"),this.restoreFp=()=>p(t(),H(Mt(()=>{},({raw:s,obj:n})=>{this._state.set(n),this._raw.set(s)}))),this.restore=ee(this.restoreFp)}fromState(t){return C(()=>{const s=this._state();return s?s[t]:void 0})}}function Yi(){return new Xi({retrieveInitData(){return p(Yn,cs("obj",()=>p(Pe(),H(({tgWebAppData:e})=>e?xe(e):we))),cs("raw",Ns),H(({obj:e,raw:t})=>p(Un,us("obj",()=>e),us("raw",()=>t))))}})}const su=Yi();class eo{constructor({version:t,request:s,isTma:n}){r(this,"isOpened"),r(this,"isSupported"),r(this,"openSlugFp"),r(this,"openSlug"),r(this,"openUrlFp"),r(this,"openUrl");const o=T({version:t,isTma:n,requires:"web_app_open_invoice",returns:"task"}),i=D(!1),a=()=>{i.set(!1)};this.isSupported=re("web_app_open_invoice",t),this.isOpened=C(i),this.openSlugFp=o((u,c)=>p(this.isOpened()?O(new Qt("Invoice is already opened")):R(void 0),Y(()=>(i.set(!0),s("web_app_open_invoice","invoice_closed",{...c,params:{slug:u},capture:l=>u===l.slug}))),Le(l=>(a(),l),l=>(a(),l.status)))),this.openUrlFp=o((u,c)=>{const{hostname:l,pathname:h}=new URL(u,window.location.href);if(l!=="t.me")return O(new se(`Link has unexpected hostname: ${l}`));const f=h.match(/^\/(\$|invoice\/)([A-Za-z0-9\-_=]+)$/);return f?this.openSlugFp(f[2],c):O(new se('Expected to receive a link with a pathname in format "/invoice/{slug}" or "/${slug}"'))}),this.openUrl=d(this.openUrlFp),this.openSlug=d(this.openSlugFp)}}function to(){return new eo(p(E(),Q,x))}const nu=to();function so({postEvent:e,...t}){return B((s,n={})=>{if(typeof s=="string")try{s=new URL(s)}catch(o){return $(new se(`"${s.toString()}" is invalid URL`,o))}return e("web_app_open_link",{url:s.toString(),try_browser:n.tryBrowser,try_instant_view:n.tryInstantView})},{...t,returns:"either"})}function no(){return so(p(E(),K))}const ro=no(),ru=d(ro);function io({postEvent:e,version:t,...s}){return B(n=>{const o=n.toString();return o.match(/^https:\/\/t.me\/.+/)?me("web_app_open_tg_link",Z(t))?(n=new URL(n),e("web_app_open_tg_link",{path_full:n.pathname+n.search})):(window.location.href=o,S(void 0)):$(new se(`"${o}" is invalid URL`))},{...s,returns:"either"})}function oo(){return io(p(E(),K,x))}const sn=oo(),iu=d(sn);function ao({openTelegramLink:e,...t}){return B((s,n)=>e("https://t.me/share/url?"+new URLSearchParams({url:s,text:n||""}).toString().replace(/\+/g,"%20")),{...t,returns:"either"})}function uo(){return ao({...E(),openTelegramLink:sn})}const co=uo(),ou=d(co);function lo(e){let t=!1,s,n;return e.available&&(t=!0,s=e.access_requested,n=e.access_granted),{available:t,accessGranted:n||!1,accessRequested:s||!1}}class po{constructor({version:t,request:s,postEvent:n,storage:o,isTma:i,isPageReload:a}){r(this,"state"),r(this,"isAvailable"),r(this,"isAccessGranted"),r(this,"isAccessRequested"),r(this,"isMounted"),r(this,"isSupported"),r(this,"openSettingsFp"),r(this,"openSettings"),r(this,"requestLocationFp"),r(this,"requestLocation"),r(this,"mountFp"),r(this,"mount"),r(this,"unmount");const u=new be({initialState:{available:!1,accessGranted:!1,accessRequested:!1},onChange:o.set}),c=new Xt({isPageReload:a,restoreState:o.get,onMounted:u.setState,initialState(g){return p(s("web_app_check_location","location_checked",g),A(lo))}}),l={version:t,requires:"web_app_check_location",isTma:i},h=T({...l,returns:"either"}),f=T({...l,returns:"task"}),m=T({...l,returns:"task",isMounted:c.isMounted});this.isAvailable=u.getter("available"),this.isAccessRequested=u.getter("accessRequested"),this.isAccessGranted=u.getter("accessGranted"),this.isSupported=re("web_app_check_location",t),this.isMounted=c.isMounted,this.state=u.state,this.unmount=c.unmount,this.mountFp=f(c.mount),this.openSettingsFp=h(()=>n("web_app_open_location_settings")),this.requestLocationFp=m(g=>p(s("web_app_request_location","location_requested",g),A(w=>{if(!w.available)return u.setState({available:!1}),null;const{available:F,...b}=w;return b}))),this.mount=d(this.mountFp),this.openSettings=d(this.openSettingsFp),this.requestLocation=d(this.requestLocationFp)}}function ho(){return new po(p(E(),K,x,Q,ge("locationManager")))}const au=ho();class fo{constructor({defaults:t,...s}){r(this,"bgColor"),r(this,"hasShineEffect"),r(this,"isEnabled"),r(this,"isLoaderVisible"),r(this,"isVisible"),r(this,"isMounted"),r(this,"state"),r(this,"text"),r(this,"textColor"),r(this,"showFp"),r(this,"show"),r(this,"hideFp"),r(this,"hide"),r(this,"enableFp"),r(this,"enable"),r(this,"enableShineEffectFp"),r(this,"enableShineEffect"),r(this,"disableFp"),r(this,"disable"),r(this,"disableShineEffectFp"),r(this,"disableShineEffect"),r(this,"setBgColorFp"),r(this,"setBgColor"),r(this,"setTextColorFp"),r(this,"setTextColor"),r(this,"setTextFp"),r(this,"setText"),r(this,"showLoaderFp"),r(this,"showLoader"),r(this,"hideLoaderFp"),r(this,"hideLoader"),r(this,"setParamsFp"),r(this,"setParams"),r(this,"mountFp"),r(this,"mount"),r(this,"unmount"),r(this,"onClickFp"),r(this,"onClick"),r(this,"offClickFp"),r(this,"offClick");const n=new rt({...s,version:"100",initialState:{hasShineEffect:!1,isEnabled:!0,isLoaderVisible:!1,isVisible:!1,text:"Continue"},method:"web_app_setup_main_button",payload:i=>({has_shine_effect:i.hasShineEffect,is_visible:i.isVisible,is_active:i.isEnabled,is_progress_visible:i.isLoaderVisible,text:i.text,color:i.bgColor,text_color:i.textColor})}),o=(i,a)=>{const u=n.stateGetter(i);return C(()=>u()||Z(a))};this.bgColor=o("bgColor",t.bgColor),this.textColor=o("textColor",t.textColor),this.hasShineEffect=n.stateGetter("hasShineEffect"),this.isEnabled=n.stateGetter("isEnabled"),this.isLoaderVisible=n.stateGetter("isLoaderVisible"),this.text=n.stateGetter("text"),this.isVisible=n.stateGetter("isVisible"),this.isMounted=n.isMounted,this.state=n.state,[this.setBgColor,this.setBgColorFp]=n.stateSetters("bgColor"),[this.setTextColor,this.setTextColorFp]=n.stateSetters("textColor"),[[this.disableShineEffect,this.disableShineEffectFp],[this.enableShineEffect,this.enableShineEffectFp]]=n.stateBoolSetters("hasShineEffect"),[[this.disable,this.disableFp],[this.enable,this.enableFp]]=n.stateBoolSetters("isEnabled"),[[this.hideLoader,this.hideLoaderFp],[this.showLoader,this.showLoaderFp]]=n.stateBoolSetters("isLoaderVisible"),[this.setText,this.setTextFp]=n.stateSetters("text"),[[this.hide,this.hideFp],[this.show,this.showFp]]=n.stateBoolSetters("isVisible"),this.setParams=n.setState,this.setParamsFp=n.setStateFp,this.onClick=n.onClick,this.onClickFp=n.onClickFp,this.offClick=n.offClick,this.offClickFp=n.offClickFp,this.mount=n.mount,this.mountFp=n.mountFp,this.unmount=n.unmount}}function ts(e,t){document.documentElement.style.setProperty(e,t)}function ss(e){document.documentElement.style.removeProperty(e)}function _o(e){return p(Ht(e),H(t=>Math.sqrt([.299,.587,.114].reduce((s,n,o)=>{const i=parseInt(t.slice(1+o*2,1+(o+1)*2),16);return s+i*i*n},0))<120))}const nn=ee(_o);class mo{constructor({initialState:t,onChange:s,offChange:n,isTma:o,storage:i,isPageReload:a}){r(this,"accentTextColor"),r(this,"bgColor"),r(this,"buttonColor"),r(this,"buttonTextColor"),r(this,"bottomBarBgColor"),r(this,"destructiveTextColor"),r(this,"headerBgColor"),r(this,"hintColor"),r(this,"linkColor"),r(this,"secondaryBgColor"),r(this,"sectionBgColor"),r(this,"sectionHeaderTextColor"),r(this,"sectionSeparatorColor"),r(this,"subtitleTextColor"),r(this,"textColor"),r(this,"_isCssVarsBound",D(!1)),r(this,"isCssVarsBound",C(this._isCssVarsBound)),r(this,"bindCssVarsFp"),r(this,"bindCssVars"),r(this,"state"),r(this,"isDark",C(()=>{const g=this.bgColor();return!g||nn(g)})),r(this,"isMounted"),r(this,"mountFp"),r(this,"mount"),r(this,"unmount");const u=new be({initialState:{},onChange:i.set}),c=g=>{u.setState(g.theme_params)},l=new De({initialState:()=>S(Z(t)),isPageReload:a,onMounted(g){u.setState(g),s(c)},onUnmounted(){n(c)},restoreState:i.get}),h={isTma:o,returns:"either"},f=T(h),m=T({...h,isMounted:l.isMounted});this.accentTextColor=u.getter("accent_text_color"),this.bgColor=u.getter("bg_color"),this.buttonColor=u.getter("button_color"),this.buttonTextColor=u.getter("button_text_color"),this.bottomBarBgColor=u.getter("bottom_bar_bg_color"),this.destructiveTextColor=u.getter("destructive_text_color"),this.headerBgColor=u.getter("header_bg_color"),this.hintColor=u.getter("hint_color"),this.linkColor=u.getter("link_color"),this.secondaryBgColor=u.getter("secondary_bg_color"),this.sectionBgColor=u.getter("section_bg_color"),this.sectionHeaderTextColor=u.getter("section_header_text_color"),this.sectionSeparatorColor=u.getter("section_separator_color"),this.subtitleTextColor=u.getter("subtitle_text_color"),this.textColor=u.getter("text_color"),this.state=u.state,this.isMounted=l.isMounted,this.bindCssVarsFp=m(g=>{if(this._isCssVarsBound())return $(new Jt);g||(g=b=>`--tg-theme-${Ar(b)}`);const w=b=>{Object.entries(u.state()).forEach(([v,_])=>{_&&b(v,_)})},F=()=>{w((b,v)=>{ts(g(b),v)})};return F(),u.state.sub(F),this._isCssVarsBound.set(!0),S(()=>{w(ss),u.state.unsub(F),this._isCssVarsBound.set(!1)})}),this.mountFp=f(l.mount),this.unmount=l.unmount,this.bindCssVars=d(this.bindCssVarsFp),this.mount=d(this.mountFp)}}const wt=Ue({});function bo(){return new mo({...p(E(),ge("themeParams")),offChange(e){Ae("theme_changed",e)},onChange(e){X("theme_changed",e)},initialState:wt})}const Je=bo();function rn(e,t,s){return p(Zt(e,t),n=>({...n,defaults:s}))}const uu=new fo(rn("mainButton","main_button_pressed",{bgColor:C(()=>Je.buttonColor()||"#2481cc"),textColor:C(()=>Je.buttonTextColor()||"#ffffff")}));class go{constructor({storage:t,isPageReload:s,version:n,postEvent:o,isTma:i,theme:a,onVisibilityChanged:u,offVisibilityChanged:c}){r(this,"isSupported"),r(this,"isDark",C(()=>{const _=this.bgColorRgb();return _?nn(_):!1})),r(this,"isActive"),r(this,"state"),r(this,"isCssVarsBound"),r(this,"bindCssVarsFp"),r(this,"bindCssVars"),r(this,"isMounted"),r(this,"mountFp"),r(this,"mount"),r(this,"unmount"),r(this,"bgColor"),r(this,"bgColorRgb"),r(this,"setBgColorFp"),r(this,"setBgColor"),r(this,"headerColor"),r(this,"headerColorRgb"),r(this,"setHeaderColorFp"),r(this,"setHeaderColor"),r(this,"bottomBarColor"),r(this,"bottomBarColorRgb"),r(this,"setBottomBarColorFp"),r(this,"setBottomBarColor"),r(this,"closeFp"),r(this,"close"),r(this,"readyFp"),r(this,"ready");const l=_=>{m.setState({isActive:_.is_visible})},h=_=>{[[this.headerColor,"web_app_set_header_color"],[this.bgColor,"web_app_set_background_color"],[this.bottomBarColor,"web_app_set_bottom_bar_color"]].forEach(([V,L])=>{const j=V();if(!Ne(j)&&(L!=="web_app_set_header_color"||!["bg_color","secondary_bg_color"].includes(j))){const k=_[j];k&&o(L,{color:k})}})},f=new De({initialState(){return S({bgColor:"bg_color",headerColor:"header_bg_color",bottomBarColor:"bottom_bar_bg_color",isActive:!0})},isPageReload:s,onMounted:_=>{u(l),a.sub(h),m.setState(_)},onUnmounted(){c(l),a.unsub(h)},restoreState:t.get});this.isMounted=f.isMounted,this.mountFp=B(()=>{const _=()=>{};return p(f.mount(),ce(_,_))},{isTma:i,returns:"plain"}),this.mount=d(this.mountFp),this.unmount=f.unmount;const m=new be({initialState:{bgColor:"bg_color",bottomBarColor:"bottom_bar_bg_color",headerColor:"bg_color",isActive:!1},onChange:t.set});this.state=m.state;const g=_=>Ne(_)?_:Z(a)[_],w=_=>C(()=>g(_()));this.isActive=m.getter("isActive"),this.isSupported=C(()=>["web_app_set_header_color","web_app_set_background_color","web_app_set_bottom_bar_color"].some(_=>me(_,Z(n))));const F=D(!1);this.isCssVarsBound=C(F),this.bindCssVarsFp=B(_=>{if(F())return $(new Jt);const[V,L]=je(()=>{F.set(!1)}),j=(k,P)=>{const M=()=>{ts(k,P()||null)};M(),V(P.sub(M),ss.bind(null,k))};return _||(_=k=>`--tg-${Ps(k)}`),j(_("bgColor"),this.bgColorRgb),j(_("bottomBarColor"),this.bottomBarColorRgb),j(_("headerColor"),this.headerColorRgb),F.set(!0),S(L)},{isTma:i,returns:"either",isMounted:this.isMounted}),this.bindCssVars=d(this.bindCssVarsFp);const b=_=>{const V=m.getter(_),L=w(V),j={headerColor:"web_app_set_header_color",bgColor:"web_app_set_background_color",bottomBarColor:"web_app_set_bottom_bar_color"}[_],k=B(P=>{if(P===V())return S(void 0);if(j==="web_app_set_header_color"&&(P==="bg_color"||P==="secondary_bg_color"))return p(o("web_app_set_header_color",{color_key:P}),H(()=>{m.setState({[_]:P})}));const M=g(P);return p(M?o(j,{color:M}):$(new Fi(P)),H(()=>{m.setState({[_]:P})}))},{isTma:i,version:n,requires:j,isMounted:this.isMounted,returns:"either",supports:_==="headerColor"?{rgb:{method:"web_app_set_header_color",param:"color",shouldCheck:Ne}}:void 0});return[V,L,d(k),k]};[this.bgColor,this.bgColorRgb,this.setBgColor,this.setBgColorFp]=b("bgColor"),[this.headerColor,this.headerColorRgb,this.setHeaderColor,this.setHeaderColorFp]=b("headerColor"),[this.bottomBarColor,this.bottomBarColorRgb,this.setBottomBarColor,this.setBottomBarColorFp]=b("bottomBarColor");const v=T({isTma:i,returns:"either"});this.closeFp=v(_=>o("web_app_close",{return_back:_})),this.close=d(this.closeFp),this.readyFp=v(()=>o("web_app_ready")),this.ready=d(this.readyFp)}}function vo(){return new go({...p(E(),K,x,ge("miniApp")),offVisibilityChanged(e){Ae("visibility_changed",e)},onVisibilityChanged(e){X("visibility_changed",e)},theme:Je.state})}const yo=vo();function wo(e){const t=e.message.trim(),s=(e.title||"").trim(),n=e.buttons||[];if(s.length>64)return $(new se(`Invalid title: ${s}`));if(!t||t.length>256)return $(new se(`Invalid message: ${t}`));if(n.length>3)return $(new se(`Invalid buttons count: ${n.length}`));const o=[];if(!n.length)o.push({type:"close",id:""});else for(let i=0;i<n.length;i++){const a=n[i],u=a.id||"";if(u.length>64)return $(new se(`Button with index ${i} has invalid id: ${u}`));if(!a.type||a.type==="default"||a.type==="destructive"){const c=a.text.trim();if(!c||c.length>64)return $(new se(`Button with index ${i} has invalid text: ${c}`));o.push({type:a.type,text:c,id:u})}else o.push({type:a.type,id:u})}return S({title:s,message:t,buttons:o})}class Fo{constructor({version:t,isTma:s,request:n}){r(this,"isOpened"),r(this,"isSupported"),r(this,"showFp"),r(this,"show");const o=D(!1),i=()=>{o.set(!1)},a=T({version:t,isTma:s,requires:"web_app_open_popup",returns:"task"});this.isSupported=re("web_app_open_popup",t),this.isOpened=C(o),this.showFp=a(u=>p(this.isOpened()?O(new Qt("A popup is already opened")):R(void 0),ue(()=>Ut(wo(u))),Y(c=>(o.set(!0),n("web_app_open_popup","popup_closed",{...u,params:c}))),Le(c=>(i(),c),c=>(i(),c.button_id)))),this.show=d(this.showFp)}}function Co(){return new Fo(p(E(),Q,x))}const cu=Co();function So({request:e,...t}){return B(s=>p(e("web_app_request_phone","phone_requested",s),A(n=>n.status)),{...t,requires:"web_app_request_phone",returns:"task"})}function ko(){return So(p(E(),x,Q))}const on=ko(),lu=d(on);function Eo({invokeCustomMethod:e,requestPhoneAccess:t,...s}){const n=a=>p(e("getRequestedContact",{},{...a,timeout:(a||{}).timeout||5e3}),ue(u=>{const c=ft(y(),u);if(!c.success)return O(new Ke(u,c.issues));if(!c.output)return R(void 0);const l=ft(Nt(G({contact:pe(G({user_id:he(),phone_number:y(),first_name:y(),last_name:I(y())})),auth_date:ne(y(),ae(h=>new Date(Number(h)*1e3)),Ze()),hash:y()})),c.output);return l.success?R({raw:c.output,parsed:l.output}):O(new Ke(c.output,l.issues))})),o=a=>p(n(a),Ye(u=>Ke.is(u)?$(u):S(void 0),u=>S(u))),i=a=>Ee(async(u,c,l)=>{let h=50;for(;!l.isRejected;){const f=await o(l)();if(f._tag==="Left")return c(f.left);if(f.right)return u(f.right);await new Promise(m=>setTimeout(m,h)),h+=50}},a);return B(a=>Ee.fn(u=>p(o(u),Y(c=>c?R(c):p(t(u),ue(l=>l==="sent"?i(u):O(new Xs("User denied access")))))),a),{...s,returns:"task",requires:"web_app_request_phone"})}function xo(){return Eo({...p(E(),es,x),requestPhoneAccess:on})}function Io({requestContact:e,...t}){return B(e,{...t,returns:"task",requires:"web_app_request_phone"})}function Ao(){return Io({...p(E(),x),requestContact(e){return p(an(e),A(t=>t.parsed))}})}const an=xo(),pu=d(an),qo=Ao(),hu=d(qo);function To({request:e,...t}){return B(s=>p(e("web_app_request_write_access","write_access_requested",s),A(n=>n.status)),{...t,requires:"web_app_request_write_access",returns:"task"})}function $o(){return To(p(E(),x,Q))}const Mo=$o(),fu=d(Mo);class Ro{constructor({version:t,onClosed:s,onTextReceived:n,isTma:o,postEvent:i}){r(this,"isOpened"),r(this,"isSupported"),r(this,"captureFp"),r(this,"capture"),r(this,"closeFp"),r(this,"close"),r(this,"openFp"),r(this,"open");const a={version:t,requires:"web_app_open_scan_qr_popup",isTma:o},u=T({...a,returns:"either"}),c=T({...a,returns:"task"}),l=D(!1),h=()=>{l.set(!1)};this.isSupported=re("web_app_open_scan_qr_popup",t),this.isOpened=C(l),this.captureFp=c(f=>{let m;return p(this.openFp({...f,onCaptured:g=>{f.capture(g)&&(m=g,this.close())}}),A(()=>m))}),this.closeFp=u(()=>p(i("web_app_close_scan_qr_popup"),H(h))),this.openFp=c(f=>p(l()?O(new Qt("The QR Scanner is already opened")):async()=>i("web_app_open_scan_qr_popup",{text:f.text}),ue(()=>{l.set(!0);const[m,g]=je(),w=F=>(g(),l.set(!1),F);return p(Ee(F=>{m(s(F),l.sub(b=>{b||F()}),n(f.onCaptured))},f),Le(w,w))}))),this.open=d(this.openFp),this.capture=d(this.captureFp),this.close=d(this.closeFp)}}function Po(){return new Ro({...p(E(),K,x),onClosed(e){return X("scan_qr_popup_closed",e)},onTextReceived(e){return X("qr_text_received",t=>{e(t.data)})}})}const du=Po();class Bo{constructor({defaults:t,...s}){r(this,"isSupported"),r(this,"position"),r(this,"bgColor"),r(this,"hasShineEffect"),r(this,"isEnabled"),r(this,"isLoaderVisible"),r(this,"isVisible"),r(this,"isMounted"),r(this,"state"),r(this,"text"),r(this,"textColor"),r(this,"showFp"),r(this,"show"),r(this,"hideFp"),r(this,"hide"),r(this,"enableFp"),r(this,"enable"),r(this,"enableShineEffectFp"),r(this,"enableShineEffect"),r(this,"disableFp"),r(this,"disable"),r(this,"disableShineEffectFp"),r(this,"disableShineEffect"),r(this,"setBgColorFp"),r(this,"setBgColor"),r(this,"setTextColorFp"),r(this,"setTextColor"),r(this,"setTextFp"),r(this,"setText"),r(this,"setPositionFp"),r(this,"setPosition"),r(this,"showLoaderFp"),r(this,"showLoader"),r(this,"hideLoaderFp"),r(this,"hideLoader"),r(this,"setParamsFp"),r(this,"setParams"),r(this,"mountFp"),r(this,"mount"),r(this,"unmount"),r(this,"onClickFp"),r(this,"onClick"),r(this,"offClickFp"),r(this,"offClick");const n=new rt({...s,initialState:{hasShineEffect:!1,isEnabled:!0,isLoaderVisible:!1,isVisible:!1,text:"Cancel",position:"left"},method:"web_app_setup_secondary_button",payload:i=>({has_shine_effect:i.hasShineEffect,is_visible:i.isVisible,is_active:i.isEnabled,is_progress_visible:i.isLoaderVisible,text:i.text,color:i.bgColor,text_color:i.textColor,position:i.position})}),o=(i,a)=>{const u=n.stateGetter(i);return C(()=>u()||Z(a))};this.isSupported=re("web_app_setup_secondary_button",s.version),this.bgColor=o("bgColor",t.bgColor),this.textColor=o("textColor",t.textColor),this.position=n.stateGetter("position"),this.hasShineEffect=n.stateGetter("hasShineEffect"),this.isEnabled=n.stateGetter("isEnabled"),this.isLoaderVisible=n.stateGetter("isLoaderVisible"),this.text=n.stateGetter("text"),this.isVisible=n.stateGetter("isVisible"),this.isMounted=n.isMounted,this.state=n.state,[this.setPosition,this.setPositionFp]=n.stateSetters("position"),[this.setBgColor,this.setBgColorFp]=n.stateSetters("bgColor"),[this.setTextColor,this.setTextColorFp]=n.stateSetters("textColor"),[[this.disableShineEffect,this.disableShineEffectFp],[this.enableShineEffect,this.enableShineEffectFp]]=n.stateBoolSetters("hasShineEffect"),[[this.disable,this.disableFp],[this.enable,this.enableFp]]=n.stateBoolSetters("isEnabled"),[[this.hideLoader,this.hideLoaderFp],[this.showLoader,this.showLoaderFp]]=n.stateBoolSetters("isLoaderVisible"),[this.setText,this.setTextFp]=n.stateSetters("text"),[[this.hide,this.hideFp],[this.show,this.showFp]]=n.stateBoolSetters("isVisible"),this.setParams=n.setState,this.setParamsFp=n.setStateFp,this.onClick=n.onClick,this.onClickFp=n.onClickFp,this.offClick=n.offClick,this.offClickFp=n.offClickFp,this.mount=n.mount,this.mountFp=n.mountFp,this.unmount=n.unmount}}function Vo(){return new Bo(rn("secondaryButton","secondary_button_pressed",{bgColor:C(()=>yo.bottomBarColorRgb()||"#000000"),textColor:C(()=>Je.buttonColor()||"#2481cc")}))}const _u=Vo();class Lo{constructor({isTma:t,request:s,version:n,createRequestId:o}){r(this,"getItemFp"),r(this,"getItem"),r(this,"restoreItemFp"),r(this,"restoreItem"),r(this,"setItemFp"),r(this,"setItem"),r(this,"deleteItemFp"),r(this,"deleteItem"),r(this,"clearFp"),r(this,"clear");const i=T({version:n,requires:"web_app_secure_storage_get_key",isTma:t,returns:"task"}),a=(u,c,l)=>{const h=o();return p(s(u,["secure_storage_failed",c],{params:{...l,req_id:h},capture:f=>"payload"in f?f.payload.req_id===h:!0}),Y(f=>f.event==="secure_storage_failed"?O(new mi(f.payload.error||"UNKNOWN_ERROR")):R(f.payload)))};this.getItemFp=i(u=>p(a("web_app_secure_storage_get_key","secure_storage_key_received",{key:u}),A(c=>({value:c.value,canRestore:!!c.can_restore})))),this.setItemFp=i((u,c)=>p(a("web_app_secure_storage_save_key","secure_storage_key_saved",{key:u,value:c}),A(()=>{}))),this.deleteItemFp=i(u=>this.setItemFp(u,null)),this.clearFp=i(()=>p(a("web_app_secure_storage_clear","secure_storage_cleared",{}),A(()=>{}))),this.restoreItemFp=i(u=>p(a("web_app_secure_storage_restore_key","secure_storage_key_restored",{key:u}),A(c=>c.value))),this.getItem=d(this.getItemFp),this.setItem=d(this.setItemFp),this.deleteItem=d(this.deleteItemFp),this.clear=d(this.clearFp),this.restoreItem=d(this.restoreItemFp)}}function jo(){return new Lo(p(E(),x,Q,tn))}const mu=jo();class Oo{constructor(t){r(this,"isVisible"),r(this,"isMounted"),r(this,"isSupported"),r(this,"hideFp"),r(this,"hide"),r(this,"showFp"),r(this,"show"),r(this,"onClickFp"),r(this,"onClick"),r(this,"offClickFp"),r(this,"offClick"),r(this,"mountFp"),r(this,"mount"),r(this,"unmount");const s=new rt({...t,method:"web_app_setup_settings_button",payload:n=>({is_visible:n.isVisible}),initialState:{isVisible:!1}});this.isVisible=s.stateGetter("isVisible"),this.isMounted=s.isMounted,this.isSupported=s.isSupported,[[this.hide,this.hideFp],[this.show,this.showFp]]=s.stateBoolSetters("isVisible"),this.onClick=s.onClick,this.onClickFp=s.onClickFp,this.offClick=s.offClick,this.offClickFp=s.offClickFp,this.mount=s.mount,this.mountFp=s.mountFp,this.unmount=s.unmount}}const bu=new Oo(Zt("settingsButton","settings_button_pressed"));class Do{constructor({postEvent:t,storage:s,isTma:n,isPageReload:o,version:i}){r(this,"isSupported"),r(this,"isVerticalEnabled"),r(this,"isMounted"),r(this,"mountFp"),r(this,"mount"),r(this,"unmount"),r(this,"disableVerticalFp"),r(this,"disableVertical"),r(this,"enableVerticalFp"),r(this,"enableVertical");const a={isVerticalEnabled:!0},u=new be({initialState:a,onChange(g){s.set(g)}}),c=new De({initialState:a,isPageReload:o,onMounted:u.setState,restoreState:s.get}),l={requires:"web_app_setup_swipe_behavior",isTma:n,version:i},h=T({...l,returns:"plain"}),f=T({...l,isMounted:c.isMounted,returns:"either"}),m=g=>{const w={isVerticalEnabled:g};return u.hasDiff(w)?p(t("web_app_setup_swipe_behavior",{allow_vertical_swipe:g}),H(()=>{u.setState(w)})):S(void 0)};this.isSupported=re("web_app_setup_swipe_behavior",i),this.isVerticalEnabled=u.getter("isVerticalEnabled"),this.isMounted=c.isMounted,this.disableVerticalFp=f(()=>m(!1)),this.enableVerticalFp=f(()=>m(!0)),this.mountFp=h(()=>{const g=()=>{};return p(c.mount(),ce(g,g))}),this.unmount=c.unmount,this.disableVertical=d(this.disableVerticalFp),this.enableVertical=d(this.enableVerticalFp),this.mount=d(this.mountFp)}}function Uo(){return new Do(p(E(),K,x,ge("swipeBehavior")))}const gu=Uo();async function vu(e){try{const{clipboard:s}=navigator;if(s)return await s.writeText(e)}catch{}const t=document.createElement("textarea");t.value=e,t.style.top="0",t.style.left="0",t.style.position="fixed",document.body.appendChild(t),t.focus(),t.select();try{document.execCommand("copy")}finally{document.body.removeChild(t)}}function Wo({request:e,...t}){return B((s,n,o)=>p(e("web_app_request_file_download","file_download_requested",{...o,params:{url:s,file_name:n}}),Y(i=>i.status==="downloading"?R(void 0):O(new Xs("User denied the action")))),{...t,requires:"web_app_request_file_download",returns:"task"})}function Go(){return Wo(p(E(),Q,x))}const No=Go(),yu=d(No);function Ho({invokeCustomMethod:e,...t}){return B(s=>p(e("getCurrentTime",{},s),Y(n=>{const o=ft(ne(he(),St(),ae(i=>new Date(i*1e3)),Ze()),n);return o.success?R(o.output):O(new Ke(n,o.issues))})),{...t,requires:"web_app_invoke_custom_method",returns:"task"})}function Ko(){return Ho(p(E(),es,x))}const zo=Ko(),wu=d(zo);function Jo({postEvent:e,...t}){return B(()=>e("web_app_hide_keyboard"),{...t,returns:"either",requires:"web_app_hide_keyboard"})}function Qo(){return Jo(p(E(),K,x))}const Zo=Qo(),Fu=d(Zo);function Xo({request:e,createRequestId:t,...s}){return B(n=>{const o=t();return p(e("web_app_read_text_from_clipboard","clipboard_text_received",{...n,params:{req_id:o},capture:Js(o)}),A(({data:i=null})=>i))},{...s,requires:"web_app_read_text_from_clipboard",returns:"task"})}function Yo(){return Xo({...p(E(),x,Q),createRequestId:Yt})}const ea=Yo(),Cu=d(ea);function ta(e){const t={},s=e.match(/Telegram-Android(?:\/([^ ]+))?(?: (\([^)]+\))?|$)/);if(s){const[,n,o]=s;n&&(t.appVersion=n),o&&o.slice(1,o.length-1).split(";").forEach(i=>{const[a,u]=i.trim().split(" ");if(a==="Android")t.androidVersion=u;else if(a==="SDK"){const c=parseInt(u,10);c&&(t.sdkVersion=c)}else u?(t.manufacturer=a,t.model=u):t.performanceClass=a})}return t}function Su(){return ta(navigator.userAgent)}function sa({postEvent:e,...t}){return B(s=>{const{size:n}=new Blob([s]);return!n||n>4096?$(new se(n?"Maximum size of data to send is 4096 bytes":"Attempted to send empty data")):e("web_app_data_send",{data:s})},{...t,returns:"either"})}function na(){return sa(p(E(),K))}const ra=na(),ku=d(ra);function ia({request:e,...t}){return B((s,n)=>p(e("web_app_send_prepared_message",["prepared_message_failed","prepared_message_sent"],{...n,params:{id:s}}),Y(o=>o.event==="prepared_message_failed"?O(new wi(o.payload.error)):R(void 0))),{...t,requires:"web_app_send_prepared_message",returns:"task"})}function oa(){return ia(p(E(),Q,x))}const aa=oa(),Eu=d(aa);function ua({postEvent:e,...t}){return B((s,n={})=>e("web_app_share_to_story",{text:n.text,media_url:s,widget_link:n.widgetLink}),{...t,requires:"web_app_share_to_story",returns:"either"})}function ca(){return ua(p(E(),K,x))}const la=ca(),xu=d(la),Ft=Ue(!1);function pa({isInlineMode:e,postEvent:t,...s}){return B((n,o)=>t("web_app_switch_inline_query",{query:n,chat_types:o||[]}),{...s,requires:{every:["web_app_switch_inline_query",()=>Z(e)?void 0:"The application must be launched in the inline mode"]},returns:"either"})}function ha(){return pa({...p(E(),K,x),isInlineMode:Ft})}const fa=ha(),Iu=d(fa);class da{constructor({storage:t,isPageReload:s,onContentSafeAreaInsetsChanged:n,onSafeAreaInsetsChanged:o,onViewportChanged:i,onFullscreenChanged:a,offContentSafeAreaInsetsChanged:u,offFullscreenChanged:c,offSafeAreaInsetsChanged:l,offViewportChanged:h,request:f,isViewportStable:m,isFullscreen:g,isTma:w,version:F,postEvent:b}){r(this,"state"),r(this,"height"),r(this,"stableHeight"),r(this,"width"),r(this,"isExpanded"),r(this,"isStable",C(()=>this.height()===this.stableHeight())),r(this,"contentSafeAreaInsets"),r(this,"contentSafeAreaInsetTop"),r(this,"contentSafeAreaInsetLeft"),r(this,"contentSafeAreaInsetRight"),r(this,"contentSafeAreaInsetBottom"),r(this,"safeAreaInsets"),r(this,"safeAreaInsetTop"),r(this,"safeAreaInsetLeft"),r(this,"safeAreaInsetRight"),r(this,"safeAreaInsetBottom"),r(this,"isFullscreen"),r(this,"requestFullscreenFp"),r(this,"requestFullscreen"),r(this,"exitFullscreenFp"),r(this,"exitFullscreen"),r(this,"isCssVarsBound"),r(this,"bindCssVarsFp"),r(this,"bindCssVars"),r(this,"isMounted"),r(this,"mountFp"),r(this,"mount"),r(this,"expandFp"),r(this,"expand");const v={top:0,right:0,left:0,bottom:0},_=new be({initialState:{contentSafeAreaInsets:v,height:0,isExpanded:!1,isFullscreen:!1,safeAreaInsets:v,stableHeight:0,width:0},onChange:t.set}),V=q=>{_.setState({isExpanded:q.is_expanded,height:q.height,width:q.width,stableHeight:q.is_state_stable?q.height:void 0})},L=q=>{_.setState({isFullscreen:q.is_fullscreen})},j=q=>{_.setState({safeAreaInsets:q})},k=q=>{_.setState({contentSafeAreaInsets:q})},P=new Xt({initialState(q){const ve=ie=>()=>{const[le,te]=ie==="safe-area"?["web_app_request_safe_area","safe_area_changed"]:["web_app_request_content_safe_area","content_safe_area_changed"];return me(le,Z(F))?f(le,te,q):R({top:0,left:0,right:0,bottom:0})},W=ie=>()=>typeof ie=="boolean"?R(ie):Ut(ie());return p(kr,Ge("safeAreaInsets",ve("safe-area")),Ge("contentSafeAreaInsets",ve("content-safe-area")),Ge("isFullscreen",W(g)),Ge("isViewportStable",W(m)),ue(({isViewportStable:ie,...le})=>ie?R({...le,height:window.innerHeight,isExpanded:!0,stableHeight:window.innerHeight,width:window.innerWidth}):p(f("web_app_request_viewport","viewport_changed",q),A(te=>({...le,height:te.height,isExpanded:te.is_expanded,stableHeight:te.is_state_stable?te.height:0,width:te.width})))))},isPageReload:s,onMounted(q){i(V),a(L),o(j),n(k),_.setState(q)},onUnmounted(){h(V),c(L),l(j),u(k)},restoreState:t.get}),M=q=>C(()=>this.safeAreaInsets()[q]),U=q=>C(()=>this.contentSafeAreaInsets()[q]);this.state=_.state,this.height=_.getter("height"),this.stableHeight=_.getter("stableHeight"),this.width=_.getter("width"),this.isExpanded=_.getter("isExpanded"),this.safeAreaInsets=_.getter("safeAreaInsets"),this.safeAreaInsetTop=M("top"),this.safeAreaInsetBottom=M("bottom"),this.safeAreaInsetLeft=M("left"),this.safeAreaInsetRight=M("right"),this.contentSafeAreaInsets=_.getter("contentSafeAreaInsets"),this.contentSafeAreaInsetTop=U("top"),this.contentSafeAreaInsetBottom=U("bottom"),this.contentSafeAreaInsetLeft=U("left"),this.contentSafeAreaInsetRight=U("right");const Ce=T({isTma:w,returns:"task"}),$e=T({isTma:w,returns:"either"}),un=T({isTma:w,requires:"web_app_request_fullscreen",version:F,returns:"task"}),ns=q=>un(ve=>p(f(q?"web_app_request_fullscreen":"web_app_exit_fullscreen",["fullscreen_changed","fullscreen_failed"],ve),Y(W=>W.event==="fullscreen_failed"&&W.payload.error!=="ALREADY_FULLSCREEN"?O(new yi(W.payload.error)):(_.setState({isFullscreen:"is_fullscreen"in W.payload?W.payload.is_fullscreen:!0}),R(void 0)))));this.isMounted=P.isMounted,this.mountFp=Ce(P.mount),this.mount=d(this.mountFp),this.isFullscreen=_.getter("isFullscreen"),this.requestFullscreenFp=ns(!0),this.requestFullscreen=d(this.requestFullscreenFp),this.exitFullscreenFp=ns(!1),this.exitFullscreen=d(this.exitFullscreenFp);const We=D(!1);this.isCssVarsBound=C(We),this.bindCssVarsFp=$e(q=>{if(We())return $(new Jt);q||(q=W=>`--tg-viewport-${Ps(W)}`);const ve=[["height",this.height],["stableHeight",this.stableHeight],["width",this.width],["safeAreaInsetTop",this.safeAreaInsetTop],["safeAreaInsetBottom",this.safeAreaInsetBottom],["safeAreaInsetLeft",this.safeAreaInsetLeft],["safeAreaInsetRight",this.safeAreaInsetRight],["contentSafeAreaInsetTop",this.contentSafeAreaInsetTop],["contentSafeAreaInsetBottom",this.contentSafeAreaInsetBottom],["contentSafeAreaInsetLeft",this.contentSafeAreaInsetLeft],["contentSafeAreaInsetRight",this.contentSafeAreaInsetRight]].reduce((W,[ie,le])=>{const te=q(ie);if(te){const rs=()=>{ts(te,`${le()}px`)};W.push({update:rs,removeListener:le.sub(rs),cssVar:te})}return W},[]);return ve.forEach(W=>{W.update()}),We.set(!0),S(()=>{ve.forEach(W=>{W.removeListener(),ss(W.cssVar)}),We.set(!1)})}),this.bindCssVars=d(this.bindCssVarsFp),this.expandFp=$e(()=>b("web_app_expand")),this.expand=d(this.expandFp)}}function _a(){const e=i=>({on:a=>{X(i,a)},off:a=>{Ae(i,a)}}),t=e("viewport_changed"),s=e("fullscreen_changed"),n=e("safe_area_changed"),o=e("content_safe_area_changed");return new da({...p(E(),ge("viewport"),x,K,Q),isFullscreen(){return p(Pe(),H(i=>!!i.tgWebAppFullscreen))},isViewportStable(){return p(Pe(),H(i=>["macos","tdesktop","unigram","webk","weba","web"].includes(i.tgWebAppPlatform)))},offContentSafeAreaInsetsChanged:o.off,offFullscreenChanged:s.off,offSafeAreaInsetsChanged:n.off,offViewportChanged:t.off,onContentSafeAreaInsetsChanged:o.on,onFullscreenChanged:s.on,onSafeAreaInsetsChanged:n.on,onViewportChanged:t.on})}const Au=_a();function ma(e={}){const{version:t,isInlineMode:s,themeParams:n}=e;if(t&&typeof s=="boolean"&&n)yt.set(t),Ft.set(s),wt.set(n);else{const u=p(Pe(),Vt(c=>c,c=>{yt.set(t||c.tgWebAppVersion),Ft.set(typeof s=="boolean"?s:!!c.tgWebAppBotInline),wt.set(n||c.tgWebAppThemeParams)}));if(u)return $(u)}e.postEvent&&Ys.set(e.postEvent);const[o,i]=je(X("reload_iframe",()=>{_e().log("Received a request to reload the page"),Si("iframe_will_reload"),window.location.reload()})),{acceptCustomStyles:a=!0}=e;if(a){const u=document.createElement("style");u.id="telegram-custom-styles",document.head.appendChild(u),o(X("set_custom_style",c=>{u.innerHTML=c}),()=>{document.head.removeChild(u)})}return p(Te("iframe_ready",{reload_supported:!0}),H(()=>(_e().log("The package was initialized"),i)))}const qu=ee(ma);export{Xs as AccessDeniedError,Ci as BackButton,Ii as Biometry,Jt as CSSVarsBoundError,Cn as CancelledError,Ti as ClosingBehavior,Mi as CloudStorage,Qt as ConcurrentCallError,Bi as DeviceStorage,_i as DeviceStorageMethodError,yi as FullscreenFailedError,gi as FunctionUnavailableError,Gi as HapticFeedback,Xi as InitData,se as InvalidArgumentsError,Wa as InvalidEnvError,Xr as InvalidLaunchParamsError,eo as Invoice,Yr as InvokeCustomMethodFailedError,Zr as LaunchParamsRetrieveError,po as LocationManager,fo as MainButton,Qr as MethodParameterUnsupportedError,Jr as MethodUnsupportedError,go as MiniApp,bi as NotAvailableError,Fo as Popup,Ro as QrScanner,Bo as SecondaryButton,Lo as SecureStorage,mi as SecureStorageMethodError,vi as SetEmojiStatusError,Oo as SettingsButton,wi as ShareMessageError,Do as SwipeBehavior,mo as ThemeParams,xs as TimeoutError,Gs as UnknownEnvError,Fi as UnknownThemeParamsKeyError,Ke as ValidationError,da as Viewport,eu as addToHomeScreen,zi as addToHomeScreenFp,La as applyPolyfills,Ga as backButton,Ka as biometry,tu as checkHomeScreenStatus,Zi as checkHomeScreenStatusFp,za as closingBehavior,Ja as cloudStorage,vu as copyTextToClipboard,qr as createLogger,Va as createPostEvent,Yt as createRequestId,Oa as createStartParam,pi as createStartParamFp,si as debug,ja as decodeBase64Url,Qs as decodeBase64UrlFp,Da as decodeStartParam,hi as decodeStartParamFp,ls as deepSnakeToCamelObjKeys,Qa as deviceStorage,yu as downloadFile,No as downloadFileFp,ut as emitEvent,Zs as encodeBase64Url,wu as getCurrentTime,zo as getCurrentTimeFp,vs as getReleaseVersion,Ya as hapticFeedback,Fu as hideKeyboard,Zo as hideKeyboardFp,qu as init,su as initData,ma as initFp,nu as invoice,Ri as invokeCustomMethod,Lr as isAnyRGB,nn as isColorDark,_o as isColorDarkFp,Ne as isRGB,Vr as isRGBA,Br as isRGBAShort,Pr as isRGBShort,Ua as isSafeToCreateStartParam,Pa as isTMA,zs as isTMAFp,au as locationManager,_e as logger,uu as mainButton,yo as miniApp,Ba as mockTelegramEnv,Ae as off,Ra as offAll,X as on,ru as openLink,ro as openLinkFp,iu as openTelegramLink,sn as openTelegramLinkFp,Ca as parseInitDataQuery,Gr as parseInitDataQueryFp,Nr as parseLaunchParamsQuery,Kt as parseLaunchParamsQueryFp,cu as popup,Si as postEvent,Te as postEventFp,du as qrScanner,Cu as readTextFromClipboard,ea as readTextFromClipboardFp,Na as request,Ha as request2,en as request2Fp,hu as requestContact,pu as requestContactComplete,an as requestContactCompleteFp,qo as requestContactFp,Za as requestEmojiStatusAccess,Oi as requestEmojiStatusAccessFp,Ai as requestFp,lu as requestPhoneAccess,on as requestPhoneAccessFp,fu as requestWriteAccess,Mo as requestWriteAccessFp,Su as retrieveAndroidDeviceData,ta as retrieveAndroidDeviceDataFrom,Aa as retrieveLaunchParams,Pe as retrieveLaunchParamsFp,qa as retrieveRawInitData,Ns as retrieveRawInitDataFp,Ta as retrieveRawLaunchParams,st as retrieveRawLaunchParamsFp,_u as secondaryButton,mu as secureStorage,ku as sendData,ra as sendDataFp,Hr as serializeInitDataQuery,Kr as serializeLaunchParamsQuery,$a as setDebug,Xa as setEmojiStatus,Wi as setEmojiStatusFp,Ma as setTargetOrigin,bu as settingsButton,Eu as shareMessage,aa as shareMessageFp,xu as shareStory,la as shareStoryFp,ou as shareURL,co as shareURLFp,me as supports,gu as swipeBehavior,Iu as switchInlineQuery,fa as switchInlineQueryFp,ni as targetOrigin,Je as themeParams,wa as toRGB,jr as toRGBFp,Fa as toRGBFull,Ht as toRGBFullFp,Au as viewport};
